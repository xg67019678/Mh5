{"ast":null,"code":"var Clipboard = require('clipboard/dist/clipboard.min.js'); // FIXME: workaround for browserify\n\nvar VueClipboardConfig = {\n  autoSetContainer: false,\n  appendToBody: true // This fixes IE, see #50\n};\nvar VueClipboard = {\n  install: function (Vue) {\n    var globalPrototype = Vue.version.slice(0, 2) === '3.' ? Vue.config.globalProperties : Vue.prototype;\n    globalPrototype.$clipboardConfig = VueClipboardConfig;\n    globalPrototype.$copyText = function (text, container) {\n      return new Promise(function (resolve, reject) {\n        var fakeElement = document.createElement('button');\n        var clipboard = new Clipboard(fakeElement, {\n          text: function () {\n            return text;\n          },\n          action: function () {\n            return 'copy';\n          },\n          container: typeof container === 'object' ? container : document.body\n        });\n        clipboard.on('success', function (e) {\n          clipboard.destroy();\n          resolve(e);\n        });\n        clipboard.on('error', function (e) {\n          clipboard.destroy();\n          reject(e);\n        });\n        if (VueClipboardConfig.appendToBody) document.body.appendChild(fakeElement);\n        fakeElement.click();\n        if (VueClipboardConfig.appendToBody) document.body.removeChild(fakeElement);\n      });\n    };\n    Vue.directive('clipboard', {\n      bind: function (el, binding, vnode) {\n        if (binding.arg === 'success') {\n          el._vClipboard_success = binding.value;\n        } else if (binding.arg === 'error') {\n          el._vClipboard_error = binding.value;\n        } else {\n          var clipboard = new Clipboard(el, {\n            text: function () {\n              return binding.value;\n            },\n            action: function () {\n              return binding.arg === 'cut' ? 'cut' : 'copy';\n            },\n            container: VueClipboardConfig.autoSetContainer ? el : undefined\n          });\n          clipboard.on('success', function (e) {\n            var callback = el._vClipboard_success;\n            callback && callback(e);\n          });\n          clipboard.on('error', function (e) {\n            var callback = el._vClipboard_error;\n            callback && callback(e);\n          });\n          el._vClipboard = clipboard;\n        }\n      },\n      update: function (el, binding) {\n        if (binding.arg === 'success') {\n          el._vClipboard_success = binding.value;\n        } else if (binding.arg === 'error') {\n          el._vClipboard_error = binding.value;\n        } else {\n          el._vClipboard.text = function () {\n            return binding.value;\n          };\n          el._vClipboard.action = function () {\n            return binding.arg === 'cut' ? 'cut' : 'copy';\n          };\n        }\n      },\n      unbind: function (el, binding) {\n        // FIXME: investigate why $element._vClipboard was missing\n        if (!el._vClipboard) return;\n        if (binding.arg === 'success') {\n          delete el._vClipboard_success;\n        } else if (binding.arg === 'error') {\n          delete el._vClipboard_error;\n        } else {\n          el._vClipboard.destroy();\n          delete el._vClipboard;\n        }\n      }\n    });\n  },\n  config: VueClipboardConfig\n};\nif (typeof exports === 'object') {\n  module.exports = VueClipboard;\n} else if (typeof define === 'function' && define.amd) {\n  define([], function () {\n    return VueClipboard;\n  });\n}","map":null,"metadata":{},"sourceType":"script","externalDependencies":[]}