{"ast":null,"code":"import \"vant/es/popup/style\";\nimport _Popup from \"vant/es/popup\";\nimport \"vant/es/nav-bar/style\";\nimport _NavBar from \"vant/es/nav-bar\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport EnterPassword from \"@/components/EnterPassword/index.vue\";\nimport { huoquyue_post, shifoushzhi_zijinmima_post } from \"@/API/user\";\nimport { orderPay } from \"@/API/commodity\";\nimport { priceFormat } from '@/utils/utis';\nexport default {\n  data() {\n    return {\n      money: 0,\n      pwtStatus: false,\n      orderList: [],\n      total: 0,\n      payMethod: [{\n        name: this.$t('余额'),\n        balance: '',\n        selected: true\n      }, {\n        name: 'PayPal',\n        balance: this.$t('您所在的地区尚未开放'),\n        selected: false\n      }, {\n        name: 'Visa',\n        balance: this.$t('您所在的地区尚未开放'),\n        selected: false\n      }, {\n        name: 'Mastercard',\n        balance: this.$t('您所在的地区尚未开放'),\n        selected: false\n      }],\n      icons: [require('@/assets/image/public/qianbao.png'), require('@/assets/image/public/pay.png'), require('@/assets/image/public/visa.png'), require('@/assets/image/public/master.png')],\n      priceFormat\n    };\n  },\n  components: {\n    [_NavBar.name]: _NavBar,\n    [_Popup.name]: _Popup,\n    [EnterPassword.name]: EnterPassword\n  },\n  mounted() {\n    this.getMoneyInfo();\n    this.orderList = JSON.parse(this.$route.query.orderList);\n    this.total = this.$route.query.total;\n    localStorage.removeItem(\"cartList\");\n    //   localStorage.removeItem(\"productList\");\n    // console.log(\n    //   \" 比较->\",\n    //   this.RemoveSameItem(\n    //     this.$ls.get(\"cartList\"),\n    //     this.orderList,\n    //     \"checkedAll\"\n    //   )\n    // );\n  },\n  created() {},\n  methods: {\n    // RemoveSameItem(listOne, listTwo, key) {\n    //   let newList = [];\n    //   loop: for (let itemOne of listOne) {\n    //     for (let itemTwo of listTwo) {\n    //       if (itemOne[key] == itemTwo[key]) {\n    //         continue loop;\n    //       }\n    //     }\n    //     newList.push(itemOne);\n    //   }\n    //   return newList.concat(listTwo);\n    // },\n    clear() {\n      // const list=[]\n      // this.$ls.get(\"cartList\") = list;\n    },\n    onClickLeft() {\n      history.go(-2);\n    },\n    //获取资金密码\n    getMoneyInfo() {\n      huoquyue_post().then(res => {\n        this.money = res.money;\n      });\n    },\n    //pay\n    handlePay() {\n      shifoushzhi_zijinmima_post({}).then(res => {\n        if (res.safeword == 1) {\n          this.pwtStatus = true;\n        } else {\n          this.$router.push({\n            path: \"/FundPasswordSettings\"\n          });\n        }\n      });\n    },\n    //输入完密码\n    getPassword(value) {\n      let data = {\n        safeword: value.substring(0, 6),\n        orderId: \"\"\n      };\n      this.orderList.forEach(item => {\n        data.orderId += item.orderId + \",\";\n      });\n      let productList = this.$ls.get(\"productList\") || [];\n      const ids = this.$route.query.ids || [];\n      // 购物车多个物品时\n      // 我也不知道为啥循环一次删不完  就多循环两次...\n      productList.forEach((item, index) => {\n        if (ids?.includes(item.id)) {\n          productList.splice(index, 1);\n        }\n      });\n      // 我也不知道为啥循环一次删不完  就多循环两次...\n      productList.forEach((item, index) => {\n        if (ids?.includes(item.id)) {\n          productList.splice(index, 1);\n        }\n      });\n      // 我也不知道为啥循环一次删不完  就多循环两次...\n      productList.forEach((item, index) => {\n        if (ids?.includes(item.id)) {\n          productList.splice(index, 1);\n        }\n      });\n      orderPay(data).then(() => {\n        // 如果购物车物品跟单独购买的商品一样时会把购物车那个商品清了, \n        // 如果不需要这个判断isCart=0是单独购买 isCart=1是购物车点进来的购买\n        this.$ls.set(\"productList\", productList);\n        this.$router.push({\n          path: \"/SuccessfulOperation\",\n          query: {\n            orderId: data.orderId,\n            isCart: this.$route.query?.isCart || 0\n          }\n        });\n      });\n    }\n  }\n};","map":{"version":3,"names":["EnterPassword","huoquyue_post","shifoushzhi_zijinmima_post","orderPay","priceFormat","data","money","pwtStatus","orderList","total","payMethod","name","$t","balance","selected","icons","require","components","_NavBar","_Popup","mounted","getMoneyInfo","JSON","parse","$route","query","localStorage","removeItem","created","methods","clear","onClickLeft","history","go","then","res","handlePay","safeword","$router","push","path","getPassword","value","substring","orderId","forEach","item","productList","$ls","get","ids","index","includes","id","splice","set","isCart"],"sources":["src/page/PendingPayment/index.vue"],"sourcesContent":["<template>\n    <div class=\"PendingPayment\">\n        <van-nav-bar safe-area-inset-top fixed left-arrow @click-left=\"onClickLeft\" />\n        <div class=\"pay-header\">\n            <div class=\"title\">\n                {{ $t(\"待付款\") }}\n            </div>\n            <!-- <div class=\"text\"> The order will be closed automatically</div> -->\n        </div>\n        <div class=\"pay-list\">\n            <div class=\"header-title\">\n                {{ $t(\"付款方式\") }}\n            </div>\n            <div class=\"list\">\n                <div class=\"item\" v-for=\"(item, index) of payMethod\" :key=\"index\">\n                    <div class=\"left\">\n                        <img class=\"icon\" :src=\"icons[index]\" />\n                        <div class=\"title\">{{ item.name }}</div>\n                        <div class=\"text\" v-if=\"index == 0\">\n                            (&nbsp;<span>${{ money ? priceFormat(money) : '0.00' }}</span>&nbsp;)\n                        </div>\n                        <div class=\"not_open\" v-else>\n                            ({{ item.balance }})\n                        </div>\n                    </div>\n                    <div class=\"right\">\n                        <img src=\"@/assets/image/public/gou.png\" v-if=\"item.selected\" />\n                        <span v-else></span>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class=\"bottom-wrap\">\n            <div class=\"fixed-wrap\">\n                <div class=\"left\">\n                    {{ $t(\"总计\") }}：\n                    <span>${{ total }}</span>\n                </div>\n                <div class=\"right\" @click=\"handlePay\">{{ $t(\"支付\") }}</div>\n            </div>\n        </div>\n        <!-- 密码弹窗 -->\n        <van-popup v-model=\"pwtStatus\" position=\"bottom\">\n            <enter-Password :isPasswordShow=\"pwtStatus\" @close=\"pwtStatus = false\"\n                @getPassword=\"getPassword\"></enter-Password>\n        </van-popup>\n    </div>\n</template>\n<script>\nimport EnterPassword from \"@/components/EnterPassword/index.vue\";\nimport { NavBar, Popup } from \"vant\";\nimport { huoquyue_post, shifoushzhi_zijinmima_post } from \"@/API/user\";\nimport { orderPay } from \"@/API/commodity\";\nimport { priceFormat } from '@/utils/utis'\n\nexport default {\n    data() {\n        return {\n            money: 0,\n            pwtStatus: false,\n            orderList: [],\n            total: 0,\n            payMethod: [\n                { name: this.$t('余额'), balance: '', selected: true },\n                { name: 'PayPal', balance: this.$t('您所在的地区尚未开放'), selected: false },\n                { name: 'Visa', balance: this.$t('您所在的地区尚未开放'), selected: false },\n                { name: 'Mastercard', balance: this.$t('您所在的地区尚未开放'), selected: false },\n            ],\n            icons: [\n                require('@/assets/image/public/qianbao.png'),\n                require('@/assets/image/public/pay.png'),\n                require('@/assets/image/public/visa.png'),\n                require('@/assets/image/public/master.png'),\n            ],\n            priceFormat\n        };\n    },\n    components: {\n        [NavBar.name]: NavBar,\n        [Popup.name]: Popup,\n        [EnterPassword.name]: EnterPassword,\n    },\n    mounted() {\n        this.getMoneyInfo();\n        this.orderList = JSON.parse(this.$route.query.orderList);\n        this.total = this.$route.query.total;\n        localStorage.removeItem(\"cartList\");\n        //   localStorage.removeItem(\"productList\");\n        // console.log(\n        //   \" 比较->\",\n        //   this.RemoveSameItem(\n        //     this.$ls.get(\"cartList\"),\n        //     this.orderList,\n        //     \"checkedAll\"\n        //   )\n        // );\n    },\n    created() { },\n    methods: {\n        // RemoveSameItem(listOne, listTwo, key) {\n        //   let newList = [];\n        //   loop: for (let itemOne of listOne) {\n        //     for (let itemTwo of listTwo) {\n        //       if (itemOne[key] == itemTwo[key]) {\n        //         continue loop;\n        //       }\n        //     }\n        //     newList.push(itemOne);\n        //   }\n        //   return newList.concat(listTwo);\n        // },\n        clear() {\n            // const list=[]\n            // this.$ls.get(\"cartList\") = list;\n        },\n        onClickLeft() {\n            history.go(-2);\n        },\n        //获取资金密码\n        getMoneyInfo() {\n            huoquyue_post().then((res) => {\n                this.money = res.money;\n            });\n        },\n        //pay\n        handlePay() {\n            shifoushzhi_zijinmima_post({}).then((res) => {\n                if (res.safeword == 1) {\n                    this.pwtStatus = true;\n                } else {\n                    this.$router.push({ path: \"/FundPasswordSettings\" });\n                }\n            });\n        },\n        //输入完密码\n        getPassword(value) {\n            let data = {\n                safeword: value.substring(0, 6),\n                orderId: \"\",\n            };\n            this.orderList.forEach((item) => {\n                data.orderId += item.orderId + \",\";\n            });\n            let productList = this.$ls.get(\"productList\") || [];\n            const ids = this.$route.query.ids || []\n            // 购物车多个物品时\n            // 我也不知道为啥循环一次删不完  就多循环两次...\n            productList.forEach((item, index) => {\n                if (ids?.includes(item.id)) {\n                    productList.splice(index, 1)\n                }\n            })\n            // 我也不知道为啥循环一次删不完  就多循环两次...\n            productList.forEach((item, index) => {\n                if (ids?.includes(item.id)) {\n                    productList.splice(index, 1)\n                }\n            })\n            // 我也不知道为啥循环一次删不完  就多循环两次...\n            productList.forEach((item, index) => {\n                if (ids?.includes(item.id)) {\n                    productList.splice(index, 1)\n                }\n            })\n            orderPay(data).then(() => {\n                // 如果购物车物品跟单独购买的商品一样时会把购物车那个商品清了, \n                // 如果不需要这个判断isCart=0是单独购买 isCart=1是购物车点进来的购买\n                this.$ls.set(\"productList\", productList)\n                this.$router.push({\n                    path: \"/SuccessfulOperation\",\n                    query: { orderId: data.orderId, isCart: this.$route.query?.isCart || 0 },\n                });\n            });\n        },\n    },\n};\n</script>\n<style lang=\"scss\" scoped>\n.PendingPayment {\n    font-size: 14px;\n    background: #eef2f6;\n    height: 100%;\n\n    .pay-header {\n        height: 220px;\n        background: url(\"@/assets/image/me/bg2.png\") no-repeat center;\n        background-size: 100% 100%;\n        padding: 0 15px;\n\n        .title {\n            font-size: 16px;\n            color: #ffffff;\n            font-weight: 500;\n            padding-top: 100px;\n        }\n\n        .text {\n            color: #ffffff;\n            font-size: 12px;\n            padding-top: 10px;\n        }\n\n    }\n\n    .pay-list {\n        margin: 0 15px;\n        background: #fff;\n        margin-top: -40px;\n        padding: 0 10px;\n\n        .header-title {\n            height: 60px;\n            line-height: 60px;\n            border-bottom: 1px solid #eeeeee;\n            color: #000000;\n        }\n\n        .list {\n            .item {\n                display: flex;\n                align-items: center;\n                border-bottom: 1px solid #eeeeee;\n                padding: 15px 0;\n                &:nth-child(1) {\n                    .icon {\n                        width: 16px;\n                        height: 16px;\n                    }\n                }\n                &:nth-child(2) {\n                    .icon {\n                        width: 13px;\n                        height: 16px;\n                    }\n                }\n                &:nth-child(3) {\n                    .icon {\n                        width: 18px;\n                        height: 16px;\n                    }\n                }\n                &:nth-child(4) {\n                    .icon {\n                        width: 18px;\n                        height: 10px;\n                    }\n                }\n                .left {\n                    flex: 1;\n                    display: flex;\n                    align-items: center;\n\n                    img {\n                        width: 22px;\n                        display: block;\n                    }\n\n                   \n\n                    .title {\n                        font-size: 16px;\n                        margin: 0 10px;\n                    }\n\n                    .text {\n                        font-weight: 500;\n                        \n                        color: var(--main-color);\n                        font-size: 16px;\n                    }\n\n                    .not_open {\n                        font-size: 12px;\n                        color: #999;\n                    }\n                }\n            }\n        }\n\n        .right {\n            span {\n                display: block;\n                width: 14px;\n                height: 14px;\n                background: #d9d9d9;\n                border-radius: 50%;\n            }\n\n            img {\n                width: 14px;\n                height: 14px;\n            }\n        }\n    }\n\n    .bottom-wrap {\n        background: #ffffff;\n        height: 53px;\n        position: fixed;\n        bottom: 0;\n        left: 0;\n        width: 100%;\n\n        .fixed-wrap {\n            margin: 0 15px;\n            display: flex;\n            align-items: center;\n            margin-top: 6px;\n\n            .left {\n                flex: 1;\n                font-size: 16px;\n\n                span {\n                    \n                    color: var(--main-color);\n                    font-weight: 500;\n                }\n            }\n\n            .right {\n                width: 108px;\n                height: 40px;\n                background: var(--main-color);\n                color: #fff;\n                font-size: 16px;\n                text-align: center;\n                line-height: 40px;\n            }\n        }\n    }\n}\n\n/deep/ .van-nav-bar {\n    background: transparent;\n}\n\n/deep/ .van-nav-bar .van-icon {\n    color: #fff;\n}\n\n.van-hairline--bottom::after {\n    border-bottom-width: 0px;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}