{"ast":null,"code":"import \"vant/es/pull-refresh/style\";\nimport _PullRefresh from \"vant/es/pull-refresh\";\nimport \"vant/es/swipe-cell/style\";\nimport _SwipeCell from \"vant/es/swipe-cell\";\nimport \"vant/es/empty/style\";\nimport _Empty from \"vant/es/empty\";\nimport \"vant/es/list/style\";\nimport _List from \"vant/es/list\";\nimport \"vant/es/nav-bar/style\";\nimport _NavBar from \"vant/es/nav-bar\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.reduce.js\";\nimport GoodsItemTwo from '@/components/GoodsItemTwo/index.vue';\nimport { isLogin } from '@/utils/utis';\nimport { keepGoodsList } from '@/API/user';\nimport { keepGoodsDel } from \"@/API/commodity\";\nexport default {\n  name: 'CollectGoods',\n  components: {\n    [_NavBar.name]: _NavBar,\n    [_List.name]: _List,\n    [_Empty.name]: _Empty,\n    [_SwipeCell.name]: _SwipeCell,\n    [_PullRefresh.name]: _PullRefresh,\n    GoodsItemTwo\n  },\n  data() {\n    return {\n      list: [],\n      loading: false,\n      finished: false,\n      refreshing: false,\n      pageNum: 1,\n      pageSize: 10\n    };\n  },\n  created() {\n    if (!isLogin()) {\n      this.$router.push('/');\n    }\n    // this.onLoad();\n  },\n  methods: {\n    onRefresh() {\n      // 清空列表数据\n      this.finished = false;\n      this.pageNum = 1;\n      // 重新加载数据\n      // 将 loading 设置为 true，表示处于加载状态\n      this.loading = true;\n      this.onLoad();\n    },\n    onLoad() {\n      if (this.refreshing) {\n        this.list = [];\n        this.refreshing = false;\n      }\n      this.getTableList();\n    },\n    getTableList() {\n      const params = {\n        pageNum: this.pageNum,\n        pageSize: this.pageSize\n      };\n      keepGoodsList(params).then(res => {\n        const {\n          pageList\n        } = res;\n        this.list = this.pageNum === 1 ? pageList : [...this.list, ...pageList];\n        this.pageNum++;\n        this.loading = false;\n        if (pageList.length < this.pageSize) {\n          this.finished = true;\n        }\n        var obj = {};\n        this.list = this.list.reduce((prev, cur) => {\n          obj[cur.id] ? \"\" : obj[cur.id] = true && prev.push(cur);\n          return prev;\n        }, []);\n      }).catch(() => {\n        this.loading = false;\n        this.finished = true;\n      });\n    },\n    delHandle(data) {\n      this.refreshing = true;\n      keepGoodsDel({\n        sellerGoodsId: data.id\n      }).then(() => {\n        this.onRefresh();\n      });\n    }\n  }\n};","map":{"version":3,"names":["GoodsItemTwo","isLogin","keepGoodsList","keepGoodsDel","name","components","_NavBar","_List","_Empty","_SwipeCell","_PullRefresh","data","list","loading","finished","refreshing","pageNum","pageSize","created","$router","push","methods","onRefresh","onLoad","getTableList","params","then","res","pageList","length","obj","reduce","prev","cur","id","catch","delHandle","sellerGoodsId"],"sources":["src/page/CollectGoods/index.vue"],"sourcesContent":["<template>\n    <div class=\"page-content\">\n        <van-nav-bar safe-area-inset-top fixed :title=\"$t('商品收藏')\" left-arrow @click-left=\"() => $router.back()\" />\n        <div style=\"width: 100%;\" class=\"h46\"></div>\n        <van-pull-refresh class=\"pull-content\" v-model=\"refreshing\" @refresh=\"onRefresh\" :pulling-text=\"$t('下拉即可刷新')\"\n            :loosing-text=\"$t('释放即可刷新')\" :loading-text=\"$t('加载中')\">\n            <van-list v-model=\"loading\" :finished=\"finished\" :finished-text=\"list.length ? $t('没有更多了') : ''\"\n                @load=\"onLoad\" :loading-text=\"$t('加载中')\">\n                <div v-if=\"list.length\" class=\"list-content\">\n                    <!-- <goods-item-two v-for=\"item in list\" :key=\"item.sellerGoodsId\" :goods-data=\"item\" /> -->\n                    <van-swipe-cell v-for=\"item in list\" :key=\"item.sellerGoodsId\">\n                        <goods-item-two :goods-data=\"item\" />\n                        <template #right>\n                            <div class=\"btn\" @click.stop=\"delHandle(item)\">{{ $t('删除') }}</div>\n                        </template>\n                    </van-swipe-cell>\n                </div>\n                <van-empty v-else :description=\"$t('暂无数据')\" />\n            </van-list>\n        </van-pull-refresh>\n    </div>\n</template>\n\n<script>\nimport { NavBar, List, PullRefresh, Empty, SwipeCell } from 'vant';\nimport GoodsItemTwo from '@/components/GoodsItemTwo/index.vue'\nimport { isLogin } from '@/utils/utis'\nimport {\n    keepGoodsList\n} from '@/API/user'\nimport { keepGoodsDel } from \"@/API/commodity\";\nexport default {\n    name: 'CollectGoods',\n    components: {\n        [NavBar.name]: NavBar,\n        [List.name]: List,\n        [Empty.name]: Empty,\n        [SwipeCell.name]: SwipeCell,\n        [PullRefresh.name]: PullRefresh,\n        GoodsItemTwo\n    },\n    data() {\n        return {\n            list: [],\n            loading: false,\n            finished: false,\n            refreshing: false,\n            pageNum: 1,\n            pageSize: 10\n        }\n    },\n    created() {\n        if (!isLogin()) {\n            this.$router.push('/')\n        }\n        // this.onLoad();\n    },\n    methods: {\n        onRefresh() {\n            // 清空列表数据\n            this.finished = false;\n            this.pageNum = 1\n            // 重新加载数据\n            // 将 loading 设置为 true，表示处于加载状态\n            this.loading = true;\n            this.onLoad();\n        },\n        onLoad() {\n            if (this.refreshing) {\n                this.list = [];\n                this.refreshing = false;\n            }\n            this.getTableList()\n        },\n        getTableList() {\n            const params = {\n                pageNum: this.pageNum,\n                pageSize: this.pageSize\n            }\n\n            keepGoodsList(params).then(res => {\n                const { pageList } = res\n                this.list = this.pageNum === 1 ? pageList : [...this.list, ...pageList]\n                this.pageNum++\n                this.loading = false\n                if (pageList.length < this.pageSize) {\n                    this.finished = true\n                }\n                var obj = {};\n                this.list = this.list.reduce((prev, cur) => {\n                    obj[cur.id] ? \"\" : (obj[cur.id] = true && prev.push(cur));\n                    return prev;\n                }, []);\n            }).catch(() => {\n                this.loading = false\n                this.finished = true\n            })\n        },\n        delHandle(data) {\n            this.refreshing = true\n            keepGoodsDel({ sellerGoodsId: data.id }).then(() => {\n                this.onRefresh()\n            })\n        }\n    }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.page-content {\n    width: 100%;\n\n    * {\n        box-sizing: border-box;\n    }\n\n    .list-content {\n        padding: 0 15px;\n    }\n\n    .pull-content {\n        min-height: calc(100vh - 46px);\n    }\n\n    /deep/ .van-swipe-cell__right {\n        display: flex;\n        align-items: center;\n        background-color: #fff;\n\n        >.btn {\n            height: 100%;\n            width: 80px;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            color: #fff;\n            font-size: 12px;\n            // background-color: var(--main-color);\n            background: var(--main-color);\n        }\n    }\n}\n</style>\n"],"mappings":";;;;;;;;;;;;;AAyBA,OAAAA,YAAA;AACA,SAAAC,OAAA;AACA,SACAC,aAAA,QACA;AACA,SAAAC,YAAA;AACA;EACAC,IAAA;EACAC,UAAA;IACA,CAAAC,OAAA,CAAAF,IAAA,GAAAE,OAAA;IACA,CAAAC,KAAA,CAAAH,IAAA,GAAAG,KAAA;IACA,CAAAC,MAAA,CAAAJ,IAAA,GAAAI,MAAA;IACA,CAAAC,UAAA,CAAAL,IAAA,GAAAK,UAAA;IACA,CAAAC,YAAA,CAAAN,IAAA,GAAAM,YAAA;IACAV;EACA;EACAW,KAAA;IACA;MACAC,IAAA;MACAC,OAAA;MACAC,QAAA;MACAC,UAAA;MACAC,OAAA;MACAC,QAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAjB,OAAA;MACA,KAAAkB,OAAA,CAAAC,IAAA;IACA;IACA;EACA;EACAC,OAAA;IACAC,UAAA;MACA;MACA,KAAAR,QAAA;MACA,KAAAE,OAAA;MACA;MACA;MACA,KAAAH,OAAA;MACA,KAAAU,MAAA;IACA;IACAA,OAAA;MACA,SAAAR,UAAA;QACA,KAAAH,IAAA;QACA,KAAAG,UAAA;MACA;MACA,KAAAS,YAAA;IACA;IACAA,aAAA;MACA,MAAAC,MAAA;QACAT,OAAA,OAAAA,OAAA;QACAC,QAAA,OAAAA;MACA;MAEAf,aAAA,CAAAuB,MAAA,EAAAC,IAAA,CAAAC,GAAA;QACA;UAAAC;QAAA,IAAAD,GAAA;QACA,KAAAf,IAAA,QAAAI,OAAA,SAAAY,QAAA,YAAAhB,IAAA,KAAAgB,QAAA;QACA,KAAAZ,OAAA;QACA,KAAAH,OAAA;QACA,IAAAe,QAAA,CAAAC,MAAA,QAAAZ,QAAA;UACA,KAAAH,QAAA;QACA;QACA,IAAAgB,GAAA;QACA,KAAAlB,IAAA,QAAAA,IAAA,CAAAmB,MAAA,EAAAC,IAAA,EAAAC,GAAA;UACAH,GAAA,CAAAG,GAAA,CAAAC,EAAA,SAAAJ,GAAA,CAAAG,GAAA,CAAAC,EAAA,YAAAF,IAAA,CAAAZ,IAAA,CAAAa,GAAA;UACA,OAAAD,IAAA;QACA;MACA,GAAAG,KAAA;QACA,KAAAtB,OAAA;QACA,KAAAC,QAAA;MACA;IACA;IACAsB,UAAAzB,IAAA;MACA,KAAAI,UAAA;MACAZ,YAAA;QAAAkC,aAAA,EAAA1B,IAAA,CAAAuB;MAAA,GAAAR,IAAA;QACA,KAAAJ,SAAA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}