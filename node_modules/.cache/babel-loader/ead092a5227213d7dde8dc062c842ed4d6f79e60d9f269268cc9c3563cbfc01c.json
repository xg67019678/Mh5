{"ast":null,"code":"import axios from \"axios\";\nexport default {\n  name: \"tiktok-login\",\n  data() {\n    return {\n      error: \"\"\n    };\n  },\n  props: {},\n  async created() {\n    const code = this.$route.query.code;\n    const type = this.$route.query.type; //类型是1line登陆还是2tiktok登陆\n\n    if (type == 2) {\n      if (!code) return;\n      console.log(code, \"code\");\n      this.$emit(\"tiktok\", {\n        code: code\n      });\n\n      //   const result = await this.getToken(code);\n      // console.log(result)\n      //   const { data } = await this.getProfile(result.token);\n\n      //   if (!this.error) {\n      //     const response = Object.assign(data, result.getPostable());\n      //     this.$emit(\"result\", response);\n      //   }\n    }\n  },\n  methods: {\n    openwindow(aa) {\n      return window.open(aa, \"newindow\", \"height=600,width=900,top=0,left=0,toolbar=no,menubar=no,scrollbars=no,resizable=no,location=no,status=no\");\n    },\n    login() {\n      let csrfState = Math.random().toString(36).substring(2);\n      //   res.cookie(\"csrfState\", csrfState, { maxAge: 60000 });\n      let url = \"https://www.tiktok.com/v2/auth/authorize/\";\n      // the following params need to be in `application/x-www-form-urlencoded` format.\n      url += \"?client_key=sbaw6ityqubmjmxj91\";\n      url += \"&scope=user.info.basic\";\n      url += \"&response_type=code\";\n      url += \"&redirect_uri=https://login.tkshouppig.com?type=2\";\n      url += \"&state=\" + csrfState;\n      window.location.href = url;\n    },\n    async getProfile(token) {\n      return await axios.post(\"https://login.tkshouppig.com/api.php\", {\n        data\n      });\n    }\n\n    // async checkFriend(token) {\n    //     const { data } = await axios.get('https://api.line.me/friendship/v1/status', {\n    //         headers: {\n    //             Authorization: `Bearer ${token}`\n    //         }\n    //     })\n\n    //     return data.friendFlag\n    // }\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}