{"ast":null,"code":"import \"vant/es/icon/style\";\nimport _Icon from \"vant/es/icon\";\nimport \"core-js/modules/es.array.push.js\";\nimport { mapGetters } from \"vuex\";\nexport default {\n  name: \"CustomerService\",\n  data() {\n    return {\n      isFirstRequest: true,\n      token: \"\",\n      serviceUrl: \"\",\n      pageHeight: \"\",\n      lang: \"\",\n      sellerId: \"\",\n      storeName: \"\",\n      isApp: window.plus ? true : false,\n      path: \"\",\n      localIsList: false,\n      isShowIcon: false\n    };\n  },\n  components: {\n    [_Icon.name]: _Icon\n  },\n  computed: {\n    ...mapGetters({\n      userInfo: \"userInfo\"\n    })\n  },\n  mounted() {\n    // this.$refs.header.$refs.navBar.offsetHeight - 44;\n    this.init();\n    // this.localIsList = this.$route.query?.path == 'contacts'\n    // 监听 message 事件\n    window.addEventListener('message', e => {\n      e.data == 'back' && this.$router.push('/');\n      // this.localIsList = this.isShowIcon = e.data == '/h5/message/yellow'\n    });\n  },\n  methods: {\n    onClickLeft() {\n      // 返回\n      this.$router.push('/');\n    },\n    // onClickRight() {\n    //     const base_url = process.env.VUE_APP_IS_APP ? this.$store.state.multiItem[process.env.VUE_APP_ITEM_NAME].app_url : location.origin\n    //     this.$refs.frame.contentWindow.postMessage('toContacts', base_url);\n    //     // this.$refs.frame.contentWindow.postMessage('toContacts', 'https://thsjbvh.site');\n\n    //     // this.$refs.frame.contentWindow.postMessage('toContacts', 'http://localhost:3000');\n    // },\n    init() {\n      this.token = localStorage.getItem(\"token\");\n      this.lang = localStorage.getItem(\"lang\");\n      // this.lang = this.lang?.replace('\"', \"\")?.replace('\"', \"\");\n      this.pageHeight = document.documentElement.clientHeight - 44;\n      this.sellerId = this.$route.query?.path ? '' : localStorage.getItem(\"sellerId\");\n      this.storeName = this.$route.query?.path ? '' : localStorage.getItem(\"storeName\");\n      // this.lang = this.lang == \"cn\" ? \"cn\" : this.lang == \"en\" ? \"en\" : \"tw\";\n      const shopName = this.$route.query?.path ? this.$t('消息') : sessionStorage.getItem('shopName');\n      const goodsId = this.$route.query?.goodsId;\n      let base_url = window?.plus ? this.$store.state.app.app_domain : location.origin;\n      if (location.origin.indexOf('localhost') > -1) {\n        base_url = 'https://thsjbvh.site';\n      }\n      const qs = this.sellerId ? `?partyid=${this.sellerId}&token=${this.token}&lang=${this.lang}&height=${this.pageHeight}px` : `?token=${this.token}&lang=${this.lang}&height=100%`;\n      console.log(`shopName ::->`, shopName);\n      this.serviceUrl = `${base_url}/chat/#/h5/${this.$route.query?.path || \"message\"}/yellow${qs}&loginType=user&nohead=true&isH5=true&selfimg=${this.userInfo?.avatar || 1}${shopName ? '&shopName=' + shopName : ''}${goodsId && goodsId != 'undefined' ? '&productId=' + goodsId : ''}`;\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}