{"ast":null,"code":"import \"vant/es/toast/style\";\nimport _Toast from \"vant/es/toast\";\nimport \"vant/es/popup/style\";\nimport _popup from \"vant/es/popup\";\nimport \"vant/es/picker/style\";\nimport _Picker from \"vant/es/picker\";\nimport \"vant/es/switch/style\";\nimport _Switch from \"vant/es/switch\";\nimport \"vant/es/nav-bar/style\";\nimport _NavBar from \"vant/es/nav-bar\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport { dizhi_liebiao_post, dizhi_xinzeng_post, dizhi_xiugai_post } from \"@/API/user\";\nimport NationalityList from \"@/components/NationalityList\";\nimport { apiListCountry, apiListState, apiListCity } from \"@/API/common\";\nimport de from \"@/i18n/de\";\nexport default {\n  data() {\n    return {\n      triangleDown: require(\"@/assets/image/me/triangle_down.png\"),\n      pageDiaCode: false,\n      dialCode: localStorage.getItem(\"dialCode\") || 1,\n      checked: true,\n      showCountryPicker: false,\n      showCityPicker: false,\n      showProvincePicker: false,\n      formData: {\n        contacts: \"\",\n        email: \"\",\n        phone: \"\",\n        country: \"\",\n        province: \"\",\n        city: \"\",\n        postcode: \"\",\n        address: \"\",\n        countryId: 0,\n        provinceId: 0,\n        cityId: 0\n      },\n      currentId: null,\n      cityList: [],\n      provinceList: [],\n      countryList: [],\n      countryId: 0,\n      provinceId: 0,\n      isProvince: true,\n      isCity: true,\n      currentCountryId: null\n    };\n  },\n  components: {\n    [_NavBar.name]: _NavBar,\n    [_Switch.name]: _Switch,\n    NationalityList,\n    [_Picker.name]: _Picker,\n    [_popup.name]: _popup\n  },\n  created() {\n    const {\n      id\n    } = this.$route.query;\n    if (id) {\n      this.currentId = id;\n      this.getAddressInfo();\n    }\n    this.getCountry();\n  },\n  methods: {\n    // 获取国家\n    async getCountry() {\n      const result = await apiListCountry();\n      this.countryList = result.data;\n    },\n    // 获取省/州\n    async getStateList(id) {\n      const res = await apiListState({\n        countryId: +id\n      });\n      this.provinceList = res.data;\n      if (this.provinceList.length == 0) {\n        this.isProvince = false;\n        this.provinceList = [{\n          stateName: this.$t(\"暂无数据\"),\n          id: \"\"\n        }];\n      }\n    },\n    // 获取市\n    async getListCity(id) {\n      const res = await apiListCity({\n        stateId: id\n      });\n      this.cityList = res.data;\n      if (this.cityList.length == 0) {\n        this.isCity = false;\n        this.cityList = [{\n          cityName: this.$t(\"暂无数据\"),\n          id: \"\"\n        }];\n      } else {\n        this.isCity = true;\n      }\n    },\n    // 城市change\n    onCityChange(value) {\n      this.cityList.find(item => {\n        if (item.cityName == value) {\n          this.formData.cityId = item.id;\n        }\n      });\n      this.formData.city = value;\n    },\n    // onCityConfirm(value) {\n    //     this.formData.city = value.cityName;\n    //     this.showCityPicker = false;\n    // },\n    onCityCancel() {\n      this.showCityPicker = false;\n    },\n    // 选择国家\n    // onCountryConfirm(value) {\n    //     this.formData.country = value.countryName;\n    //     this.countryId = value.id;\n    //     this.isProvince = true;\n    //     this.isCity = true;\n    //     this.showCountryPicker = false;\n    //     this.currentCountryId = value.id;\n    //     // 查看有没有省\n    //     this.getStateList(value.id);\n    // },\n    onCountryChange(value) {\n      this.countryList.find(item => {\n        if (item.countryName == value) {\n          this.formData.country = value;\n          this.formData.countryId = item.id;\n          this.currentCountryId = this.countryId = item.id;\n          this.isProvince = true;\n          this.showCountryPicker = false;\n          this.getStateList(item.id);\n        }\n      });\n      this.formData.city = this.formData.province = \"\";\n      this.formData.cityId = this.formData.provinceId = 0;\n      // this.formData.country = value.countryName;\n      // this.countryId = value.id;\n      // this.isProvince = true;\n      // this.isCity = true;\n      // this.showCountryPicker = false;\n      // this.currentCountryId = value.id;\n      // // 查看有没有省\n      // this.getStateList(value.id);\n    },\n    onCountryCancel() {\n      this.showCountryPicker = false;\n    },\n    // onProvinceConfirm(value) {\n    //     this.formData.province = value.stateName;\n    //     this.provinceId = value.id;\n    //     this.showProvincePicker = false;\n    //     this.getListCity(value.id);\n    // },\n    onProvinceChange(value) {\n      this.provinceList.find(item => {\n        if (item.stateName == value) {\n          this.formData.province = value;\n          this.formData.provinceId = item.id;\n          this.provinceId = item.id;\n          this.showProvincePicker = false;\n          this.getListCity(item.id);\n        }\n      });\n      this.formData.city = '';\n    },\n    onProvinceCancel() {\n      this.showProvincePicker = false;\n    },\n    clickCountry() {\n      document.activeElement.blur();\n      this.showCountryPicker = true;\n      this.formData.province = \"\";\n      this.formData.city = \"\";\n    },\n    ProvincePicker() {\n      document.activeElement.blur();\n      this.formData.city = \"\";\n      // 选择省\n      if (this.formData.country == \"\") {\n        _Toast(this.$t(\"请输入\") + this.$t(\"国家\"));\n      } else {\n        this.getStateList(this.countryId);\n        this.showProvincePicker = true;\n      }\n    },\n    CityPicker() {\n      document.activeElement.blur();\n      if (this.formData.province == this.$t(\"暂无数据\")) {\n        this.formData.city = this.$t(\"暂无数据\");\n        // this.city\n      } else if (this.formData.country && this.formData.province) {\n        this.getListCity(this.provinceId);\n        this.showCityPicker = true;\n      } else {\n        _Toast(this.$t(\"请输入\") + this.$t(\"省区\"));\n      }\n    },\n    getAddressInfo() {\n      _Toast.loading({\n        duration: 0,\n        // message: this.$t(\"请求中\"),\n        forbidClick: true\n      });\n      dizhi_liebiao_post({}).then(res => {\n        _Toast.clear();\n        const {\n          pageList\n        } = res;\n        const address = pageList.find(item => String(item.id) === String(this.currentId));\n        if (address) {\n          this.checked = Boolean(address.use);\n          this.currentCountryId = address?.countryId;\n          if (address.phone.indexOf(\"|\") > -1) {\n            const arr = address.phone.split(\"|\");\n            this.dialCode = arr[0];\n            address.phone = arr[1];\n          }\n          delete address.use;\n          address?.countryId && this.getStateList(address.countryId);\n          address?.provinceId && this.getListCity(address.provinceId);\n          this.formData = {\n            ...address\n          };\n        }\n      }).catch(err => {\n        // Toast.fail(err.msg);\n      });\n    },\n    onClickLeft() {\n      this.$router.go(-1);\n    },\n    // 禁止input框输入表情\n    inputVal(type, e) {\n      let reg = /([0-9|*|#]\\uFE0F\\u20E3)|([0-9|#]\\u20E3)|([\\u203C-\\u3299]\\uFE0F\\u200D)|([\\u203C-\\u3299]\\uFE0F)|([\\u2122-\\u2B55])|(\\u303D)|([(\\A9)|(\\AE)]\\u3030)|(\\uA9)|(\\uAE)|(\\u3030)|([\\uD83C|\\uD83D|\\uD83E][\\uDC00-\\uDFFF])|([\\uD83C|\\uD83D|\\uD83E][\\uDC00-\\uDFFF][\\u200D|\\uFE0F])/g;\n      setTimeout(() => {\n        this.formData[type] = e.replace(reg, \"\");\n      }, 0);\n    },\n    getName(params) {\n      if (!this.pageDiaCode) {\n        this.pageDiaCode = true;\n      } else {\n        this.dialCode = params[2];\n        localStorage.setItem(\"dialCode\", this.dialCode);\n      }\n    },\n    openNational() {\n      this.$refs.controlChild.open();\n    },\n    handleInputChange(e) {\n      // 限制input只能输入数字\n      if (/^[1-9]\\d*$|^$/.test(e)) {\n        this.formData.phone = e;\n      }\n    },\n    submitHandle() {\n      if (this.formData.contacts === \"\") {\n        _Toast(this.$t(\"请输入\") + this.$t(\"名称\"));\n        return;\n      }\n      if (this.formData.email === \"\") {\n        _Toast(this.$t(\"请输入\") + this.$t(\"邮箱\"));\n        return;\n      } else {\n        const reg = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$/;\n        if (!reg.test(this.formData.email)) {\n          console.log(`this.formData.email ::->`, this.formData.email);\n          _Toast(this.$t(\"邮箱格式有误\"));\n          return;\n        }\n      }\n      if (this.formData.phone === \"\") {\n        _Toast(this.$t(\"请输入\") + this.$t(\"手机号\"));\n        return;\n      } else {\n        const reg = /^[0-9]+[0-9]*$/;\n        if (!reg.test(this.formData.phone)) {\n          _Toast(this.$t(\"手机号格式有误\"));\n          return;\n        }\n      }\n      if (this.formData.country === \"\") {\n        _Toast(this.$t(\"请输入\") + this.$t(\"国家\"));\n        return;\n      }\n      // if (this.formData.province === \"\") {\n      //   Toast(this.$t(\"请输入\") + this.$t(\"省区\"));\n      //   return;\n      // }\n      // if (this.formData.city === \"\") {\n      //   Toast(this.$t(\"请输入\") + this.$t(\"市\"));\n      //   return;\n      // }\n      if (this.formData.postcode === \"\") {\n        // Toast(this.$t(\"请输入\") + this.$t(\"邮编\"));\n        this.$notifyWarn(this.$t(\"请输入\") + this.$t(\"邮编\"));\n        return;\n      }\n      if (this.formData.address === \"\") {\n        // Toast(this.$t(\"请输入\") + this.$t(\"收件地址\"));\n        this.$notifyWarn(this.$t(\"请输入\") + this.$t(\"收件地址\"));\n        return;\n      }\n      if (this.isProvince && this.formData.province == '') {\n        // Toast(this.$t(\"请选择\") + this.$t(\"省区\"));\n        this.$notifyWarn(this.$t(\"请选择\") + this.$t(\"省区\"));\n        return;\n      }\n      if (this.isProvince && this.isCity && this.formData.city == '') {\n        // Toast(this.$t(\"请选择\") + this.$t(\"市\"));\n        this.$notifyWarn(this.$t(\"请选择\") + this.$t(\"市\"));\n        return;\n      }\n      const params = {\n        ...this.formData,\n        countryId: this.currentCountryId,\n        phone: `${this.dialCode}|${this.formData.phone}`,\n        use: this.checked ? 1 : 0\n      };\n      params.province == '' && delete params.province;\n      params.city == '' && delete params.city;\n      let ajaxFn = dizhi_xinzeng_post;\n      if (this.currentId) {\n        params.id = this.currentId;\n        ajaxFn = dizhi_xiugai_post;\n      }\n      _Toast.loading({\n        duration: 0,\n        message: this.$t(\"提交中\"),\n        forbidClick: true\n      });\n      ajaxFn(params).then(() => {\n        _Toast.success(this.$t(\"保存成功\"));\n        setTimeout(() => {\n          this.$router.go(-1);\n        }, 500);\n      }).catch(err => {\n        _Toast.clear();\n        // Toast.fail(err.msg);\n      });\n    }\n  }\n};","map":{"version":3,"names":["dizhi_liebiao_post","dizhi_xinzeng_post","dizhi_xiugai_post","NationalityList","apiListCountry","apiListState","apiListCity","de","data","triangleDown","require","pageDiaCode","dialCode","localStorage","getItem","checked","showCountryPicker","showCityPicker","showProvincePicker","formData","contacts","email","phone","country","province","city","postcode","address","countryId","provinceId","cityId","currentId","cityList","provinceList","countryList","isProvince","isCity","currentCountryId","components","_NavBar","name","_Switch","_Picker","_popup","created","id","$route","query","getAddressInfo","getCountry","methods","result","getStateList","res","length","stateName","$t","getListCity","stateId","cityName","onCityChange","value","find","item","onCityCancel","onCountryChange","countryName","onCountryCancel","onProvinceChange","onProvinceCancel","clickCountry","document","activeElement","blur","ProvincePicker","_Toast","CityPicker","loading","duration","forbidClick","then","clear","pageList","String","Boolean","use","indexOf","arr","split","catch","err","onClickLeft","$router","go","inputVal","type","e","reg","setTimeout","replace","getName","params","setItem","openNational","$refs","controlChild","open","handleInputChange","test","submitHandle","console","log","$notifyWarn","ajaxFn","message","success"],"sources":["src/page/AddressDetails/index.vue"],"sourcesContent":["<template>\n    <div class=\"AddressDetails\" style=\"min-height: 100vh;\">\n        <nationality-list ref=\"controlChild\" :title=\"$t('选择区域码')\" @getName=\"getName(arguments)\"></nationality-list>\n\n        <van-nav-bar safe-area-inset-top fixed :title=\"$t('新增地址/修改地址')\" :right-text=\"$t('保存')\" left-arrow\n            @click-left=\"onClickLeft\" @click-right=\"submitHandle\" />\n        <div style=\"width: 100%; height: 46px\"></div>\n\n        <div class=\"form-content\">\n            <div class=\"item\">\n                <el-input :placeholder=\"$t('收货人姓名')\" v-model=\"formData.contacts\" clearable maxlength=\"64\" show-word-limit\n                    @input=\"inputVal('contacts', $event)\">\n                </el-input>\n            </div>\n            <div class=\"item\">\n                <el-input :placeholder=\"$t('邮箱')\" v-model.trim=\"formData.email\" clearable maxlength=\"64\" show-word-limit>\n                </el-input>\n            </div>\n            <div class=\"item\">\n                <el-input :placeholder=\"$t('手机号')\" maxlength=\"20\" :value=\"formData.phone\" @input=\"handleInputChange\">\n                    <div slot=\"prepend\" @click=\"openNational\">\n                        <p>\n                            +<span>{{ dialCode }}</span>\n                            <img :src=\"triangleDown\" alt=\"\" class=\"icon\" />\n                        </p>\n                    </div>\n                </el-input>\n            </div>\n            <div class=\"address_item\">\n                <el-select v-model=\"formData.country\" filterable :placeholder=\"$t('请选择')\" :no-data-text=\"$t('暂无数据')\"\n                    :no-match-text=\"$t('暂无数据')\" :loading-text=\"$t('加载中')\" @change=\"onCountryChange\">\n                    <el-option v-for=\"item in countryList\" :key=\"item.id\" value-key=\"countryName\" :label=\"item.label\"\n                        :value=\"item.countryName\">\n                    </el-option>\n                </el-select>\n                <el-select v-if=\"isProvince\" v-model=\"formData.province\" filterable :placeholder=\"$t('请选择')\"\n                    :no-data-text=\"$t('暂无数据')\" :no-match-text=\"$t('暂无数据')\" :loading-text=\"$t('加载中')\"\n                    @change=\"onProvinceChange\">\n                    <el-option v-for=\"item in provinceList\" :key=\"item.id\" value-key=\"stateName\" :label=\"item.label\"\n                        :value=\"item.stateName\">\n                    </el-option>\n                </el-select>\n                <el-select v-if=\"isProvince && isCity\" v-model=\"formData.city\" filterable :no-data-text=\"$t('暂无数据')\"\n                    :no-match-text=\"$t('暂无数据')\" :loading-text=\"$t('加载中')\" :placeholder=\"$t('请选择')\" @change=\"onCityChange\">\n                    <el-option v-for=\"item in cityList\" :key=\"item.id\" value-key=\"cityName\" :label=\"item.label\"\n                        :value=\"item.cityName\">\n                    </el-option>\n                </el-select>\n            </div>\n            <div class=\"item\">\n                <el-input :placeholder=\"$t('邮编')\" maxlength=\"32\" show-word-limit v-model=\"formData.postcode\" clearable>\n                </el-input>\n            </div>\n            <div class=\"item\">\n                <el-input type=\"textarea\" :placeholder=\"$t('收件地址')\" v-model=\"formData.address\" resize=\"none\" maxlength=\"255\"\n                    show-word-limit :autosize=\"{ minRows: 3, maxRows: 4 }\" clearable>\n                </el-input>\n            </div>\n            <div class=\"item check\">\n                <div style=\"flex: 1\">{{ $t(\"设为默认地址\") }}</div>\n                <van-switch v-model=\"checked\" size=\"20px\" />\n            </div>\n        </div>\n    </div>\n</template>\n<script>\nimport { NavBar, Switch, Toast, Picker, popup } from \"vant\";\nimport {\n    dizhi_liebiao_post,\n    dizhi_xinzeng_post,\n    dizhi_xiugai_post,\n} from \"@/API/user\";\nimport NationalityList from \"@/components/NationalityList\";\nimport { apiListCountry, apiListState, apiListCity } from \"@/API/common\";\nimport de from \"@/i18n/de\";\nexport default {\n    data() {\n        return {\n            triangleDown: require(\"@/assets/image/me/triangle_down.png\"),\n            pageDiaCode: false,\n            dialCode: localStorage.getItem(\"dialCode\") || 1,\n            checked: true,\n            showCountryPicker: false,\n            showCityPicker: false,\n            showProvincePicker: false,\n            formData: {\n                contacts: \"\",\n                email: \"\",\n                phone: \"\",\n                country: \"\",\n                province: \"\",\n                city: \"\",\n                postcode: \"\",\n                address: \"\",\n                countryId: 0,\n                provinceId: 0,\n                cityId: 0,\n            },\n            currentId: null,\n            cityList: [],\n            provinceList: [],\n            countryList: [],\n            countryId: 0,\n            provinceId: 0,\n            isProvince: true,\n            isCity: true,\n            currentCountryId: null,\n        };\n    },\n    components: {\n        [NavBar.name]: NavBar,\n        [Switch.name]: Switch,\n        NationalityList,\n        [Picker.name]: Picker,\n        [popup.name]: popup,\n    },\n    created() {\n        const { id } = this.$route.query;\n        if (id) {\n            this.currentId = id;\n            this.getAddressInfo();\n        }\n        this.getCountry();\n    },\n    methods: {\n        // 获取国家\n        async getCountry() {\n            const result = await apiListCountry();\n            this.countryList = result.data;\n        },\n        // 获取省/州\n        async getStateList(id) {\n            const res = await apiListState({ countryId: +id });\n            this.provinceList = res.data;\n            if (this.provinceList.length == 0) {\n                this.isProvince = false;\n                this.provinceList = [{ stateName: this.$t(\"暂无数据\"), id: \"\" }];\n            }\n        },\n        // 获取市\n        async getListCity(id) {\n            const res = await apiListCity({ stateId: id });\n            this.cityList = res.data;\n            if (this.cityList.length == 0) {\n                this.isCity = false;\n                this.cityList = [{ cityName: this.$t(\"暂无数据\"), id: \"\" }];\n            } else {\n                this.isCity = true;\n            }\n        },\n        // 城市change\n        onCityChange(value) {\n            this.cityList.find((item) => {\n                if (item.cityName == value) {\n                    this.formData.cityId = item.id;\n                }\n            });\n            this.formData.city = value;\n        },\n        // onCityConfirm(value) {\n        //     this.formData.city = value.cityName;\n        //     this.showCityPicker = false;\n        // },\n        onCityCancel() {\n            this.showCityPicker = false;\n        },\n        // 选择国家\n        // onCountryConfirm(value) {\n        //     this.formData.country = value.countryName;\n        //     this.countryId = value.id;\n        //     this.isProvince = true;\n        //     this.isCity = true;\n        //     this.showCountryPicker = false;\n        //     this.currentCountryId = value.id;\n        //     // 查看有没有省\n        //     this.getStateList(value.id);\n        // },\n        onCountryChange(value) {\n            this.countryList.find((item) => {\n                if (item.countryName == value) {\n                    this.formData.country = value\n                    this.formData.countryId = item.id\n                    this.currentCountryId = this.countryId = item.id;\n                    this.isProvince = true;\n                    this.showCountryPicker = false;\n                    this.getStateList(item.id);\n                }\n            })\n            this.formData.city = this.formData.province = \"\";\n            this.formData.cityId = this.formData.provinceId = 0;\n            // this.formData.country = value.countryName;\n            // this.countryId = value.id;\n            // this.isProvince = true;\n            // this.isCity = true;\n            // this.showCountryPicker = false;\n            // this.currentCountryId = value.id;\n            // // 查看有没有省\n            // this.getStateList(value.id);\n        },\n        onCountryCancel() {\n            this.showCountryPicker = false;\n        },\n        // onProvinceConfirm(value) {\n        //     this.formData.province = value.stateName;\n        //     this.provinceId = value.id;\n        //     this.showProvincePicker = false;\n        //     this.getListCity(value.id);\n        // },\n        onProvinceChange(value) {\n            this.provinceList.find((item) => {\n                if (item.stateName == value) {\n                    this.formData.province = value\n                    this.formData.provinceId = item.id\n                    this.provinceId = item.id;\n                    this.showProvincePicker = false;\n                    this.getListCity(item.id);\n                }\n            })\n            this.formData.city = ''\n        },\n        onProvinceCancel() {\n            this.showProvincePicker = false;\n        },\n        clickCountry() {\n            document.activeElement.blur();\n            this.showCountryPicker = true;\n            this.formData.province = \"\";\n            this.formData.city = \"\";\n        },\n        ProvincePicker() {\n            document.activeElement.blur();\n            this.formData.city = \"\";\n            // 选择省\n            if (this.formData.country == \"\") {\n                Toast(this.$t(\"请输入\") + this.$t(\"国家\"));\n            } else {\n                this.getStateList(this.countryId);\n                this.showProvincePicker = true;\n            }\n        },\n\n        CityPicker() {\n            document.activeElement.blur();\n            if (this.formData.province == this.$t(\"暂无数据\")) {\n                this.formData.city = this.$t(\"暂无数据\");\n                // this.city\n            } else if (this.formData.country && this.formData.province) {\n                this.getListCity(this.provinceId);\n                this.showCityPicker = true;\n            } else {\n                Toast(this.$t(\"请输入\") + this.$t(\"省区\"));\n            }\n        },\n        getAddressInfo() {\n            Toast.loading({\n                duration: 0,\n                // message: this.$t(\"请求中\"),\n                forbidClick: true,\n            });\n\n            dizhi_liebiao_post({})\n                .then((res) => {\n                    Toast.clear();\n                    const { pageList } = res;\n                    const address = pageList.find(\n                        (item) => String(item.id) === String(this.currentId)\n                    );\n                    if (address) {\n                        this.checked = Boolean(address.use);\n                        this.currentCountryId = address?.countryId\n                        if (address.phone.indexOf(\"|\") > -1) {\n                            const arr = address.phone.split(\"|\");\n                            this.dialCode = arr[0];\n                            address.phone = arr[1];\n                        }\n                        delete address.use;\n                        address?.countryId && this.getStateList(address.countryId)\n                        address?.provinceId && this.getListCity(address.provinceId)\n                        this.formData = {\n                            ...address,\n                        };\n                    }\n                })\n                .catch((err) => {\n                    // Toast.fail(err.msg);\n                });\n        },\n\n        onClickLeft() {\n            this.$router.go(-1);\n        },\n        // 禁止input框输入表情\n        inputVal(type, e) {\n            let reg =\n                /([0-9|*|#]\\uFE0F\\u20E3)|([0-9|#]\\u20E3)|([\\u203C-\\u3299]\\uFE0F\\u200D)|([\\u203C-\\u3299]\\uFE0F)|([\\u2122-\\u2B55])|(\\u303D)|([(\\A9)|(\\AE)]\\u3030)|(\\uA9)|(\\uAE)|(\\u3030)|([\\uD83C|\\uD83D|\\uD83E][\\uDC00-\\uDFFF])|([\\uD83C|\\uD83D|\\uD83E][\\uDC00-\\uDFFF][\\u200D|\\uFE0F])/g;\n            setTimeout(() => {\n                this.formData[type] = e.replace(reg, \"\");\n            }, 0);\n        },\n        getName(params) {\n            if (!this.pageDiaCode) {\n                this.pageDiaCode = true;\n            } else {\n                this.dialCode = params[2];\n                localStorage.setItem(\"dialCode\", this.dialCode);\n            }\n        },\n        openNational() {\n            this.$refs.controlChild.open();\n        },\n        handleInputChange(e) {\n            // 限制input只能输入数字\n            if (/^[1-9]\\d*$|^$/.test(e)) {\n                this.formData.phone = e\n            }\n\n        },\n        submitHandle() {\n            if (this.formData.contacts === \"\") {\n                Toast(this.$t(\"请输入\") + this.$t(\"名称\"));\n                return;\n            }\n            if (this.formData.email === \"\") {\n                Toast(this.$t(\"请输入\") + this.$t(\"邮箱\"));\n                return;\n            } else {\n                const reg =\n                /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$/;\n                if (!reg.test(this.formData.email)) {\n                    console.log(`this.formData.email ::->`, this.formData.email);\n                    Toast(this.$t(\"邮箱格式有误\"));\n                    return;\n                }\n            }\n            if (this.formData.phone === \"\") {\n                Toast(this.$t(\"请输入\") + this.$t(\"手机号\"));\n                return;\n            } else {\n                const reg = /^[0-9]+[0-9]*$/;\n                if (!reg.test(this.formData.phone)) {\n                    Toast(this.$t(\"手机号格式有误\"));\n                    return;\n                }\n            }\n            if (this.formData.country === \"\") {\n                Toast(this.$t(\"请输入\") + this.$t(\"国家\"));\n                return;\n            }\n            // if (this.formData.province === \"\") {\n            //   Toast(this.$t(\"请输入\") + this.$t(\"省区\"));\n            //   return;\n            // }\n            // if (this.formData.city === \"\") {\n            //   Toast(this.$t(\"请输入\") + this.$t(\"市\"));\n            //   return;\n            // }\n            if (this.formData.postcode === \"\") {\n                // Toast(this.$t(\"请输入\") + this.$t(\"邮编\"));\n                this.$notifyWarn(this.$t(\"请输入\") + this.$t(\"邮编\"))\n                return;\n            }\n            if (this.formData.address === \"\") {\n                // Toast(this.$t(\"请输入\") + this.$t(\"收件地址\"));\n                this.$notifyWarn(this.$t(\"请输入\") + this.$t(\"收件地址\"))\n                return;\n            }\n            if (this.isProvince && this.formData.province == '') {\n                // Toast(this.$t(\"请选择\") + this.$t(\"省区\"));\n                this.$notifyWarn(this.$t(\"请选择\") + this.$t(\"省区\"))\n                return;\n            }\n            if (this.isProvince && this.isCity && this.formData.city == '') {\n                // Toast(this.$t(\"请选择\") + this.$t(\"市\"));\n                this.$notifyWarn(this.$t(\"请选择\") + this.$t(\"市\"))\n                return;\n            }\n            const params = {\n                ...this.formData,\n                countryId: this.currentCountryId,\n                phone: `${this.dialCode}|${this.formData.phone}`,\n                use: this.checked ? 1 : 0,\n            };\n\n            params.province == '' && delete params.province\n            params.city == '' && delete params.city\n            let ajaxFn = dizhi_xinzeng_post;\n            if (this.currentId) {\n                params.id = this.currentId;\n                ajaxFn = dizhi_xiugai_post;\n            }\n\n            Toast.loading({\n                duration: 0,\n                message: this.$t(\"提交中\"),\n                forbidClick: true,\n            });\n\n            ajaxFn(params)\n                .then(() => {\n                    Toast.success(this.$t(\"保存成功\"));\n                    setTimeout(() => {\n                        this.$router.go(-1);\n                    }, 500);\n                })\n                .catch((err) => {\n                    Toast.clear();\n                    // Toast.fail(err.msg);\n                });\n        },\n    },\n};\n</script>\n<style lang=\"scss\" scoped>\n.AddressDetails {\n    width: 100%;\n\n    /deep/ .van-nav-bar__right {\n        .van-nav-bar__text {\n            color: val(--main-color) !important;\n        }\n    }\n\n    /deep/ .el-input {\n        input:focus {\n            border-color: var(--main-color) !important;\n        }\n    }\n\n    /deep/ .el-textarea {\n        textarea:focus {\n            border-color: var(--main-color) !important;\n        }\n    }\n\n    .nr {\n        width: 100%;\n        padding: 0 15px;\n        box-sizing: border-box;\n\n        .biaoti {\n            margin-top: 20px;\n            font-style: normal;\n            font-weight: 400;\n            font-size: 12px;\n            line-height: 16px;\n            color: #333333;\n        }\n\n        .shuru {\n            width: 100%;\n            margin-top: 11px;\n        }\n\n        .tijiao {\n            margin-top: 20px;\n            width: 100%;\n            height: 44px;\n            background: var(--main-color);\n            border-radius: 4px;\n            font-style: normal;\n            font-weight: 400;\n            font-size: 16px;\n            line-height: 44px;\n            /* identical to box height, or 100% */\n\n            text-align: center;\n\n            color: #ffffff;\n        }\n\n        .moren {\n            font-style: normal;\n            font-weight: 400;\n            font-size: 14px;\n            line-height: 16px;\n            color: #333333;\n            margin-top: 22px;\n            display: flex;\n            width: 100%;\n            justify-content: center;\n            align-items: center;\n        }\n    }\n}\n\n.form-content {\n    box-sizing: border-box;\n    padding: 0 15px;\n    padding-bottom: 50px;\n\n    * {\n        box-sizing: border-box;\n    }\n\n    >.item {\n        margin-top: 11px;\n\n        /deep/ .el-input-group--prepend {\n            .el-input-group__prepend {\n                background-color: transparent !important;\n                color: #000 !important;\n                border-right: none !important;\n                padding: 0 15px !important;\n\n                .icon {\n                    width: 10px;\n                    height: auto;\n                    position: relative;\n                    top: -1px;\n                    margin-left: 5px;\n                }\n            }\n\n            .el-input__inner {\n                border-left-color: #fff;\n            }\n        }\n\n        &.check {\n            font-style: normal;\n            font-weight: 400;\n            font-size: 14px;\n            line-height: 16px;\n            color: #333333;\n            display: flex;\n            width: 100%;\n            justify-content: center;\n            align-items: center;\n            border: 1px solid #dcdfe6;\n            padding: 14px 15px;\n            border-radius: 4px;\n        }\n    }\n\n    .address_item {\n        display: flex;\n        margin-top: 11px;\n        gap: 10px;\n    }\n}\n\n.van-switch--on {\n    background-color: var(--main-color) !important;\n}\n\n/deep/ .el-input>.el-input__inner {\n    padding-right: 10px !important;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    overflow: hidden;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}