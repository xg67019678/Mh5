{"ast":null,"code":"import \"vant/es/overlay/style\";\nimport _Overlay from \"vant/es/overlay\";\nimport \"vant/es/icon/style\";\nimport _Icon from \"vant/es/icon\"; // eslint-disable-next-line\n/* eslint-disable */\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { qiangdan_post, qiangdanxiangqing_post } from \"@/API/user\";\nimport { mapGetters, mapMutations, mapState } from \"vuex\";\nimport { isLogin } from '@/utils/utis';\nexport default {\n  props: {\n    idx: {\n      type: Number,\n      default: 0\n    }\n  },\n  data() {\n    return {\n      qiangdan_show: false,\n      timer_shijian: \"\",\n      cartNum: 0,\n      isChristmas: process.env?.VUE_APP_IS_CHRISTMAS,\n      listItem: [{\n        cls: \"home\",\n        name: this.$t(\"首页\"),\n        path: \"/home\",\n        icon: 'shouye',\n        src: require(\"@/assets/image/bottom/home.png\"),\n        srcSelect: require(`@/assets/${process.env.VUE_APP_ITEM_NAME}/home2.png`)\n      }, {\n        cls: \"commodity\",\n        name: this.$t(\"商品\"),\n        path: \"/commodity\",\n        icon: \"24gf-appsBig6\",\n        src: require(\"@/assets/image/bottom/chongzhi.png\"),\n        srcSelect: require(`@/assets/${process.env.VUE_APP_ITEM_NAME}/chongzhi2.png`)\n      },\n      // {\n      //   cls: \"shop\",\n      //   name: this.$t(\"店铺\"),\n      //   path: \"/shop\",\n      //   src: require('@/assets/image/bottom/company_normal.png'),\n      //   srcSelect: require('@/assets/image/bottom/company_normal2.png'),\n      // },\n      {\n        cla: \"cart\",\n        name: this.$t(\"购物车\"),\n        path: \"/cart\",\n        icon: 'gouwuchefill',\n        src: require(\"@/assets/image/bottom/renwu.png\"),\n        srcSelect: require(`@/assets/${process.env.VUE_APP_ITEM_NAME}/renwu2.png`)\n      }, {\n        cla: \"me\",\n        name: this.$t(\"我的\"),\n        path: \"/me\",\n        icon: \"wode\",\n        src: require(\"@/assets/image/bottom/wode.png\"),\n        srcSelect: require(`@/assets/${process.env.VUE_APP_ITEM_NAME}/wode2.png`)\n      }]\n    };\n  },\n  components: {\n    [_Icon.name]: _Icon,\n    [_Overlay.name]: _Overlay\n  },\n  created() {\n    if (this.isChristmas) {\n      this.listItem = this.listItem.map((item, index) => ({\n        ...item,\n        src: require(`@/assets/christmas/${index + 1}.png`),\n        srcSelect: require(`@/assets/christmas/${index + 1}.png`)\n      }));\n    }\n  },\n  activated() {\n    this.getChartNum();\n  },\n  mounted() {\n    this.getChartNum();\n  },\n  updated() {\n    this.getChartNum();\n  },\n  computed: mapState({\n    count: state => state.qiangdan.count\n  }),\n  methods: {\n    ...mapMutations([\"setQiangdan\"]),\n    ...mapMutations([\"qiangdan_status_sj\"]),\n    ...mapMutations([\"qiangdan_tanchuang_sj\"]),\n    getChartNum() {\n      setTimeout(() => {\n        this.cartNum = isLogin() && localStorage.getItem(\"CART_NUM\");\n      }, 300);\n\n      // this.cartNum = JSON.parse(\n      //     localStorage.getItem(\"productList\")\n      // )?.value.reduce(function (prev, cur) {\n      //     return (prev += cur.count);\n      // }, 0);\n    },\n    qiangdan_sj(e) {\n      const t = this;\n      this.qiangdan_status_sj(e);\n      qiangdan_post({}).then(res => {\n        // brush_time: 5\n        // orderId: \"3987503220907183731\"\n        var time = res.brush_time * 1000;\n        t.timer_shijian = setTimeout(function () {\n          t.qiangdan_xq(res.orderId);\n        }, time);\n      }).catch(function (err) {\n        // Toast('网络波动请刷新页面');\n        t.qiangdan_status_sj(false);\n      });\n    },\n    qiangdan_xq(e) {\n      var t = this;\n      qiangdanxiangqing_post({\n        orderId: e\n      }).then(res => {\n        this.qiangdan_status_sj(false);\n        this.setQiangdan(res);\n        this.qiangdan_tanchuang_sj(true);\n      }).catch(function (err) {\n        // Toast('网络波动请刷新页面');\n        t.qiangdan_status_sj(false);\n      });\n    },\n    change(item, index) {\n      if (this.$route.path !== item.path) {\n        this.$router.push({\n          path: item.path\n        });\n      }\n      this.$emit(\"change\", index);\n    }\n  },\n  watch: {\n    count(val) {\n      this.getChartNum();\n    }\n    // '$route'(form, to) {\n    //     if (to.path == '/language') {\n    //         console.log(`getStorage('lang') ::->`, getStorage('lang'));\n    //         // this.handleReload()\n    //         // this.$i18n.locale = 'en';\n    //         // // 'en'  'tw'  'cn'\n    //         // console.log(`this.$i18n ::->`, this.$i18n);\n    //     }\n    // }\n  },\n  beforeDestroy() {\n    clearTimeout(this.timer_shijian);\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}