{"ast":null,"code":"import \"vant/es/toast/style\";\nimport _Toast from \"vant/es/toast\";\nimport \"vant/es/nav-bar/style\";\nimport _NavBar from \"vant/es/nav-bar\";\nimport { priceFormat } from '@/utils/utis';\nimport { orderReturns } from '@/API/user';\nexport default {\n  name: 'OrderRefund',\n  components: {\n    [_NavBar.name]: _NavBar,\n    [_Toast.name]: _Toast\n  },\n  data() {\n    return {\n      optionsData: [{\n        value: '1',\n        label: this.$t('未收到货')\n      }, {\n        value: '2',\n        label: this.$t('不喜欢，不想要')\n      }, {\n        value: '3',\n        label: this.$t('卖家发错货')\n      }, {\n        value: '4',\n        label: this.$t('假冒品牌')\n      }, {\n        value: '5',\n        label: this.$t('少发、漏发')\n      }, {\n        value: '6',\n        label: this.$t('收到商品破损')\n      }, {\n        value: '7',\n        label: this.$t('存在质量问题')\n      }, {\n        value: '8',\n        label: this.$t('与商家协商一致退款')\n      }, {\n        value: '9',\n        label: this.$t('其他原因')\n      }],\n      orderId: null,\n      priceFormat,\n      formData: {\n        returnReason: '',\n        money: 0,\n        returnDetail: ''\n      }\n    };\n  },\n  mounted() {\n    this.$nextTick(() => {\n      const {\n        id,\n        a\n      } = this.$route.query;\n      if (id && (a || a === 0)) {\n        this.orderId = id;\n        this.formData.money = this.priceFormat(a);\n      } else {\n        _Toast(this.$t('订单号不存在'));\n        setTimeout(() => {\n          this.$router.back();\n        }, 1500);\n      }\n    });\n  },\n  methods: {\n    submitHandle() {\n      if (this.formData.returnReason === '') {\n        _Toast(this.$t('请选择') + this.$t('退款理由'));\n        return false;\n      }\n      //   if (this.formData.returnDetail === ''){\n      //     Toast(this.$t('请输入') + this.$t('退款说明'));\n      //     return false\n      //   }\n\n      _Toast.loading({\n        duration: 0,\n        message: this.$t('提交中'),\n        forbidClick: true\n      });\n      const params = {\n        orderId: this.orderId,\n        ...this.formData\n      };\n      orderReturns(params).then(res => {\n        if (res == 'err403') return _Toast.clear();\n        _Toast(this.$t('提交成功'));\n        setTimeout(() => {\n          this.$router.back();\n        }, 1500);\n      }).catch(err => {\n        console.log(`err ::->`, err);\n        _Toast.clear();\n      });\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}