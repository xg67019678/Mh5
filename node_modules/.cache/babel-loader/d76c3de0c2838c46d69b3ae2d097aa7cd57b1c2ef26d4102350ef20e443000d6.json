{"ast":null,"code":"import \"vant/es/icon/style\";\nimport _Icon from \"vant/es/icon\";\nimport \"core-js/modules/es.array.push.js\";\nimport { mapGetters } from \"vuex\";\nexport default {\n  name: \"CustomerService\",\n  data() {\n    return {\n      isFirstRequest: true,\n      token: \"\",\n      serviceUrl: \"\",\n      pageHeight: \"\",\n      lang: \"\",\n      sellerId: \"\",\n      storeName: \"\",\n      isApp: window.plus ? true : false,\n      path: \"\",\n      localIsList: false,\n      isShowIcon: false\n    };\n  },\n  components: {\n    [_Icon.name]: _Icon\n  },\n  computed: {\n    ...mapGetters({\n      userInfo: \"userInfo\"\n    })\n  },\n  mounted() {\n    // this.$refs.header.$refs.navBar.offsetHeight - 44;\n    this.init();\n    // this.localIsList = this.$route.query?.path == 'contacts'\n    // 监听 message 事件\n    window.addEventListener('message', e => {\n      e.data == 'back' && this.$router.push('/');\n      // this.localIsList = this.isShowIcon = e.data == '/h5/message/yellow'\n    });\n  },\n  methods: {\n    onClickLeft() {\n      // 返回\n      this.$router.push('/');\n    },\n    // onClickRight() {\n    //     const base_url = process.env.VUE_APP_IS_APP ? this.$store.state.multiItem[process.env.VUE_APP_ITEM_NAME].app_url : location.origin\n    //     this.$refs.frame.contentWindow.postMessage('toContacts', base_url);\n    //     // this.$refs.frame.contentWindow.postMessage('toContacts', 'https://thsjbvh.site');\n\n    //     // this.$refs.frame.contentWindow.postMessage('toContacts', 'http://localhost:3000');\n    // },\n    init() {\n      this.token = localStorage.getItem(\"token\");\n      this.lang = localStorage.getItem(\"lang\");\n      // this.lang = this.lang?.replace('\"', \"\")?.replace('\"', \"\");\n      this.pageHeight = document.documentElement.clientHeight - 44;\n      this.sellerId = this.$route.query?.path ? '' : localStorage.getItem(\"sellerId\");\n      this.storeName = this.$route.query?.path ? '' : localStorage.getItem(\"storeName\");\n      // this.lang = this.lang == \"cn\" ? \"cn\" : this.lang == \"en\" ? \"en\" : \"tw\";\n      const shopName = this.$route.query?.path ? this.$t('消息') : sessionStorage.getItem('shopName');\n      const goodsId = this.$route.query?.goodsId;\n      let base_url = window?.plus ? this.$store.state.app.app_domain : location.origin;\n      if (location.origin.indexOf('localhost') > -1) {\n        base_url = 'https://thsjbvh.site';\n      }\n      const qs = this.sellerId ? `?partyid=${this.sellerId}&token=${this.token}&lang=${this.lang}&height=${this.pageHeight}px` : `?token=${this.token}&lang=${this.lang}&height=100%`;\n      console.log(`shopName ::->`, shopName);\n      this.serviceUrl = `${base_url}/chat/#/h5/${this.$route.query?.path || \"message\"}/yellow${qs}&loginType=user&nohead=true&isH5=true&selfimg=${this.userInfo?.avatar || 1}${shopName ? '&shopName=' + shopName : ''}${goodsId && goodsId != 'undefined' ? '&productId=' + goodsId : ''}`;\n    }\n  }\n};","map":{"version":3,"names":["mapGetters","name","data","isFirstRequest","token","serviceUrl","pageHeight","lang","sellerId","storeName","isApp","window","plus","path","localIsList","isShowIcon","components","_Icon","computed","userInfo","mounted","init","addEventListener","e","$router","push","methods","onClickLeft","localStorage","getItem","document","documentElement","clientHeight","$route","query","shopName","$t","sessionStorage","goodsId","base_url","$store","state","app","app_domain","location","origin","indexOf","qs","console","log","avatar"],"sources":["src/page/customerService/index.vue"],"sourcesContent":["<template>\n    <div class=\"service-box\" :style=\"isApp ? { height: '93%' } : null\">\n\n        <!--      <div class=\"h-10 bg-grey w-full\"></div> -->\n\n        <div class=\"back\" @click=\"$router.go(-1)\">\n            <!-- <img src=\"@/assets/image/back.png\" alt=\"\"> -->\n        </div>\n        <iframe ref=\"frame\" :src=\"serviceUrl\" frameborder=\"0\" width=\"100%\" height=\"100%\"\n            :class=\"[this.localIsList && 'local_list']\"></iframe>\n    </div>\n</template>\n\n<script>\nimport { Icon } from 'vant';\nimport { mapGetters } from \"vuex\";\nexport default {\n    name: \"CustomerService\",\n    data() {\n        return {\n            isFirstRequest: true,\n            token: \"\",\n            serviceUrl: \"\",\n            pageHeight: \"\",\n            lang: \"\",\n            sellerId: \"\",\n            storeName: \"\",\n            isApp: window.plus ? true : false,\n            path: \"\",\n            localIsList: false,\n            isShowIcon: false\n        };\n    },\n    components: {\n        [Icon.name]: Icon,\n    },\n    computed: {\n        ...mapGetters({\n            userInfo: \"userInfo\",\n        }),\n    },\n    mounted() {\n        // this.$refs.header.$refs.navBar.offsetHeight - 44;\n        this.init()\n        // this.localIsList = this.$route.query?.path == 'contacts'\n        // 监听 message 事件\n        window.addEventListener('message', (e) => {\n            e.data == 'back' && this.$router.push('/');\n            // this.localIsList = this.isShowIcon = e.data == '/h5/message/yellow'\n        });\n    },\n    methods: {\n        onClickLeft() {\n            // 返回\n            this.$router.push('/');\n        },\n        // onClickRight() {\n        //     const base_url = process.env.VUE_APP_IS_APP ? this.$store.state.multiItem[process.env.VUE_APP_ITEM_NAME].app_url : location.origin\n        //     this.$refs.frame.contentWindow.postMessage('toContacts', base_url);\n        //     // this.$refs.frame.contentWindow.postMessage('toContacts', 'https://thsjbvh.site');\n\n        //     // this.$refs.frame.contentWindow.postMessage('toContacts', 'http://localhost:3000');\n        // },\n        init() {\n            this.token = localStorage.getItem(\"token\");\n            this.lang = localStorage.getItem(\"lang\");\n            // this.lang = this.lang?.replace('\"', \"\")?.replace('\"', \"\");\n            this.pageHeight = document.documentElement.clientHeight - 44\n            this.sellerId = this.$route.query?.path ? '' : localStorage.getItem(\"sellerId\");\n            this.storeName = this.$route.query?.path ? '' : localStorage.getItem(\"storeName\");\n            // this.lang = this.lang == \"cn\" ? \"cn\" : this.lang == \"en\" ? \"en\" : \"tw\";\n            const shopName = this.$route.query?.path ? this.$t('消息') : sessionStorage.getItem('shopName')\n            const goodsId = this.$route.query?.goodsId\n            let base_url = window?.plus ? this.$store.state.app.app_domain : location.origin\n            if (location.origin.indexOf('localhost') > -1) {\n                base_url = 'https://thsjbvh.site'\n            }\n            const qs = this.sellerId\n                ? `?partyid=${this.sellerId}&token=${this.token}&lang=${this.lang}&height=${this.pageHeight}px`\n                : `?token=${this.token}&lang=${this.lang}&height=100%`;\n            console.log(`shopName ::->`, shopName);\n            this.serviceUrl = `${base_url}/chat/#/h5/${this.$route.query?.path || \"message\"\n                }/yellow${qs}&loginType=user&nohead=true&isH5=true&selfimg=${this.userInfo?.avatar || 1}${shopName ? '&shopName=' + shopName : ''}${(goodsId && goodsId != 'undefined') ? '&productId=' + goodsId : ''}`;\n        }\n    },\n};\n</script>\n<style lang=\"scss\" scoped>\n// iframe {\n//     transform: translateY(44px);\n// }\n// .local_list {\n//     transform: translateY(0) !important;\n// }\n.notify {\n    width: 100%;\n    height: 77px;\n    display: flex;\n    align-items: center;\n    padding: 0 15px;\n    border-bottom: 1px solid #F4F6F9;\n\n    .img {\n        width: 40px;\n        height: 40px;\n        background: #ccc;\n        border-radius: 50%;\n    }\n\n    .content1 {\n        margin-left: 10px;\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        width: 70vw;\n\n        span {\n            &:nth-child(1) {\n                font-weight: 600;\n                font-size: 14px;\n            }\n\n            &:nth-child(2) {\n                font-size: 12px;\n                color: #999;\n            }\n        }\n    }\n}\n\n.back {\n    width: 44px;\n    height: 44px;\n    position: fixed;\n    top: 0;\n    left: 0;\n    background: transparent;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n}\n\n.service-box {\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n}\n\n.time {\n    padding-top: 0;\n    padding-bottom: 10px;\n    padding-left: 54px;\n\n    &.justify-end {\n        padding-right: 54px;\n    }\n}\n\n.content {\n    overflow-y: scroll;\n    height: calc(100vh - 110px);\n    position: fixed;\n    width: 100%;\n}\n\n.break-word {\n    word-break: break-word;\n}\n\n// .max-w-230 {\n//   //max-width: 230px;\n// }\n.responser {\n    position: relative;\n    //&::after {\n    //    content: '';\n    //    width:0;\n    //    height:0;\n    //    border-top:10px solid transparent;\n    //    border-bottom:10px solid transparent;\n    //    border-right:20px solid #f3f3f3;\n    //    position: absolute;\n    //    left: -20px;\n    //    top: 20px;\n    //}\n}\n\n.fasong {\n    width: 74px;\n    height: 34px;\n    font-style: normal;\n    font-weight: 400;\n    font-size: 14px;\n    line-height: 34px;\n    text-align: center;\n    color: #ffffff;\n    // background: var(--main-color);\n    background: var(--main-color);\n    border-radius: 45px;\n}\n\n.etyaak0 {\n    position: absolute;\n    left: 0;\n    bottom: 784px;\n}\n</style>\n"],"mappings":";;;AAeA,SAAAA,UAAA;AACA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,cAAA;MACAC,KAAA;MACAC,UAAA;MACAC,UAAA;MACAC,IAAA;MACAC,QAAA;MACAC,SAAA;MACAC,KAAA,EAAAC,MAAA,CAAAC,IAAA;MACAC,IAAA;MACAC,WAAA;MACAC,UAAA;IACA;EACA;EACAC,UAAA;IACA,CAAAC,KAAA,CAAAhB,IAAA,GAAAgB;EACA;EACAC,QAAA;IACA,GAAAlB,UAAA;MACAmB,QAAA;IACA;EACA;EACAC,QAAA;IACA;IACA,KAAAC,IAAA;IACA;IACA;IACAV,MAAA,CAAAW,gBAAA,YAAAC,CAAA;MACAA,CAAA,CAAArB,IAAA,mBAAAsB,OAAA,CAAAC,IAAA;MACA;IACA;EACA;EACAC,OAAA;IACAC,YAAA;MACA;MACA,KAAAH,OAAA,CAAAC,IAAA;IACA;IACA;IACA;IACA;IACA;;IAEA;IACA;IACAJ,KAAA;MACA,KAAAjB,KAAA,GAAAwB,YAAA,CAAAC,OAAA;MACA,KAAAtB,IAAA,GAAAqB,YAAA,CAAAC,OAAA;MACA;MACA,KAAAvB,UAAA,GAAAwB,QAAA,CAAAC,eAAA,CAAAC,YAAA;MACA,KAAAxB,QAAA,QAAAyB,MAAA,CAAAC,KAAA,EAAArB,IAAA,QAAAe,YAAA,CAAAC,OAAA;MACA,KAAApB,SAAA,QAAAwB,MAAA,CAAAC,KAAA,EAAArB,IAAA,QAAAe,YAAA,CAAAC,OAAA;MACA;MACA,MAAAM,QAAA,QAAAF,MAAA,CAAAC,KAAA,EAAArB,IAAA,QAAAuB,EAAA,SAAAC,cAAA,CAAAR,OAAA;MACA,MAAAS,OAAA,QAAAL,MAAA,CAAAC,KAAA,EAAAI,OAAA;MACA,IAAAC,QAAA,GAAA5B,MAAA,EAAAC,IAAA,QAAA4B,MAAA,CAAAC,KAAA,CAAAC,GAAA,CAAAC,UAAA,GAAAC,QAAA,CAAAC,MAAA;MACA,IAAAD,QAAA,CAAAC,MAAA,CAAAC,OAAA;QACAP,QAAA;MACA;MACA,MAAAQ,EAAA,QAAAvC,QAAA,GACA,iBAAAA,QAAA,eAAAJ,KAAA,cAAAG,IAAA,gBAAAD,UAAA,OACA,eAAAF,KAAA,cAAAG,IAAA;MACAyC,OAAA,CAAAC,GAAA,kBAAAd,QAAA;MACA,KAAA9B,UAAA,MAAAkC,QAAA,mBAAAN,MAAA,CAAAC,KAAA,EAAArB,IAAA,uBACAkC,EAAA,sDAAA5B,QAAA,EAAA+B,MAAA,QAAAf,QAAA,kBAAAA,QAAA,QAAAG,OAAA,IAAAA,OAAA,kCAAAA,OAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}