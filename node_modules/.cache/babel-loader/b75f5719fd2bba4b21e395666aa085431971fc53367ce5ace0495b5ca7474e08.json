{"ast":null,"code":"import \"vant/es/overlay/style\";\nimport _Overlay from \"vant/es/overlay\";\nimport { mapMutations, mapGetters } from \"vuex\";\nimport { apiHeartbeat, apiGetMaxBuyNum, apiGetCustomerService, apiGetAppDomain } from '@/API/common';\nimport { apiApplyLoan } from \"./API/loan\";\nexport default {\n  name: \"App\",\n  data() {\n    return {\n      show: false,\n      isChristmas: process.env?.VUE_APP_IS_CHRISTMAS,\n      timer: \"\",\n      itemData: this.$store.state.multiItem[process.env.VUE_APP_ITEM_NAME],\n      itemName: process.env.VUE_APP_ITEM_NAME,\n      mainColor: process.env.VUE_APP_MAIN_COLOR,\n      audioLock: true,\n      hidden: false,\n      paths: {\n        'Argos': 'https://argos.me/',\n        'MetaShop': 'https://e-metashop.com/',\n        'Tongda': 'https://www.tongdashops.com/',\n        'FamilyMart': 'https://familymartex.com/',\n        'FamilyShop': 'https://www.familyshopex.com/',\n        'Inchoi': 'https://Inchoishop.com/',\n        'Hive': 'https://www.hivemalls.com/',\n        'TikTokMall': 'https://tiktokmallin.com/',\n        'Shop2u': 'https://shop2u.co/',\n        'EShop': 'https://ml.thsjbvh.site/',\n        'GreenMall': 'https://djeion.com/',\n        'SM-wholesaleShop': 'https://justshopmall.com/',\n        'ArgosShop': 'https://argosshoppro.com/',\n        'Iceland': 'https://icelandmarts.com/',\n        'INT Overstock': 'https://overstock8.me/',\n        'TikTok-Wholesale': 'https://tiktok-wholesale.com/',\n        'AntMall': 'https://antmallin.com/'\n        // https://www.ehkhux.com  TEXM\n        // albbin.com   alibaba\n      }\n    };\n  },\n  components: {\n    [_Overlay.name]: _Overlay\n  },\n  computed: {\n    audioPlay() {\n      return this.$store.state.app.audioPlay;\n    }\n  },\n  created() {\n    if (this.$route.query.lang) {\n      if (this.$route.query.lang == \"cn\") {\n        this.handleSetLang(\"cn\");\n      } else {\n        this.handleSetLang(\"en\");\n      }\n    }\n    if (window.plus) {\n      this.plusReady();\n    } else {\n      document.addEventListener(\"plusready\", this.plusReady, false);\n    }\n    let link = document.head.querySelector(\"link\");\n    link.href = require(`@/assets/${this.itemName}/favicon.png`);\n    document.title = this.itemName;\n    // 刷新事件\n    window.addEventListener(\"beforeunload\", () => {\n      sessionStorage.removeItem(\"scrollTopCount\");\n      // sessionStorage.removeItem(\"showLoading\")\n    });\n    if (localStorage.getItem('lang') == 'en-US') localStorage.setItem('lang', 'en');\n    setInterval(() => {\n      let token = localStorage.getItem(\"token\");\n      token && apiHeartbeat();\n    }, 1000 * 60 * 5);\n    this.getMaxBuyNum();\n    this.getCustomerService();\n    apiGetAppDomain().then(res => {\n      if (res.app_domain_link) {\n        this.$store.state.app.app_domain = res.app_domain_link;\n      } else {\n        this.$store.state.app.app_domain = this.paths[this.itemName];\n      }\n    }).catch(err => {\n      this.$store.state.app.app_domain = this.paths[this.itemName];\n    });\n  },\n  mounted() {\n    if (this.isChristmas) {\n      this.$refs.audioRef && this.$refs.audioRef.play();\n      document.addEventListener('click', () => {\n        if (!this.audioLock) return;\n        this.$refs.audioRef && this.$refs.audioRef.play();\n        this.audioLock = false;\n      });\n    }\n    if (window?.plus) {\n      document.addEventListener(\"visibilitychange\", () => {\n        if (document.visibilityState == \"visible\") {\n          if (!this.audioPlay) return;\n          this.$refs.audioRef && this.$refs.audioRef.play();\n        }\n        if (document.visibilityState == \"hidden\") {\n          this.$refs.audioRef && this.$refs.audioRef.pause();\n        }\n      });\n    }\n    window.fbAsyncInit = function () {\n      FB.init({\n        appId: '541937795097198',\n        //要填設定>基本資料裡的應用程式編號\n        cookie: true,\n        xfbml: true,\n        version: 'v2.2'\n      });\n      FB.AppEvents.logPageView();\n    };\n  },\n  methods: {\n    plusReady() {\n      // H5 plus事件处理\n      // eslint-disable-next-line no-undef\n      plus.screen.lockOrientation(\"portrait-primary\");\n\n      // 设置系统状态栏背景为红色\n      // eslint-disable-next-line no-undef\n      // var type = plus.os.name;\n      // if (type === \"Android\" || type === \"iOS\") {\n      //     switch (this.$route.path) {\n      //         case \"/me\":\n      //             // eslint-disable-next-line no-undef\n      //             plus.navigator.setStatusBarStyle(\"light\");\n      //             // eslint-disable-next-line no-undef\n      //             plus.navigator.setStatusBarBackground(this.mainColor);\n      //             break;\n      //         default:\n      //             // eslint-disable-next-line no-undef\n      //             plus.navigator.setStatusBarStyle(\"dark\");\n      //             // eslint-disable-next-line no-undef\n      //             plus.navigator.setStatusBarBackground(\"#ffffff\");\n      //     }\n      // }\n    },\n    // 获取商品最大购买数\n    async getMaxBuyNum() {\n      let {\n        mall_max_goods_number_in_order\n      } = await apiGetMaxBuyNum({\n        code: 'mall_max_goods_number_in_order'\n      });\n      localStorage.setItem('maxBuyNum', mall_max_goods_number_in_order);\n    },\n    // 获取客服地址\n    async getCustomerService() {\n      let {\n        customer_service_url\n      } = await apiGetCustomerService('?code=customer_service_url');\n      if (customer_service_url) {\n        this.$store.state.multiItem[this.itemName].customer_service = customer_service_url;\n      }\n    },\n    handleSetLang(lang) {\n      // 设置i18n.locale 组件库会按照上面的配置使用对应的文案文件\n      this.$i18n.locale = lang;\n      // 提交mutations\n      this.setLanguage(lang);\n    }\n  },\n  watch: {\n    \"$store.state\": function (newVal) {\n      if ($store.state.qiangdan.qiangdan_status) {\n        this.show = true;\n      }\n    },\n    $route: function (to, from) {\n      if (to.name !== 'home') {\n        document.body.scrollTop = 0;\n        document.documentElement.scrollTop = 0;\n      } else {\n        setTimeout(() => {\n          window.scrollTo({\n            top: sessionStorage.getItem(\"scrollTopCount\"),\n            behavior: \"smooth\"\n          });\n        }, 500);\n      }\n    },\n    audioPlay(val) {\n      if (val) {\n        this.$refs.audioRef && this.$refs.audioRef.play();\n      } else {\n        this.$refs.audioRef && this.$refs.audioRef.pause();\n      }\n    }\n  },\n  beforeDestroy() {\n    clearInterval(this.timer);\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}