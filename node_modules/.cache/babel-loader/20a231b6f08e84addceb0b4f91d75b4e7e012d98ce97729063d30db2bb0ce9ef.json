{"ast":null,"code":"import \"vant/es/dialog/style\";\nimport _Dialog from \"vant/es/dialog\";\nimport \"vant/es/popup/style\";\nimport _Popup from \"vant/es/popup\";\nimport { mapGetters } from 'vuex';\nimport { gerenxinxi_post, apilogoff, huoquyue_post } from '@/API/user';\nimport EnterPassword from \"@/components/EnterPassword/index.vue\";\nexport default {\n  components: {\n    EnterPassword,\n    [_Popup.name]: _Popup,\n    [_Dialog.name]: _Dialog\n  },\n  data() {\n    return {\n      itemName: process.env.VUE_APP_ITEM_NAME,\n      formLabelAlign: {\n        account: '',\n        reason: '',\n        cashPassword: ''\n      },\n      pwtStatus: false\n    };\n  },\n  async created() {\n    const {\n      username\n    } = await gerenxinxi_post({});\n    this.formLabelAlign.account = username;\n  },\n  computed: {\n    ...mapGetters({\n      userInfo: 'userInfo'\n    })\n  },\n  methods: {\n    onClickLeft() {\n      this.$router.go(-1);\n    },\n    onLogout() {\n      if (this.formLabelAlign.account.trim() == '') {\n        this.$notify(this.$t('请输入您的账号'), 'warning');\n        return;\n      }\n      if (this.formLabelAlign.reason.trim() == '') {\n        this.$notify(this.$t('请输入您的离开原因'), 'warning');\n        return;\n      }\n      let message = this.$t('警告！请谨慎操作注销账户，如果您不再使用该账号，可点击【同意注销】，注销后可能几天内无法注册。');\n      if (process.env.VUE_APP_PUT_ON_SHELVES) {\n        message = this.$t('警告！请谨慎操作注销账户，如果您不再使用该账号，可点击【同意注销】，注销后72小时内无法注册。');\n      }\n      _Dialog.alert({\n        title: this.$t('您确认要注销账号吗？'),\n        message,\n        messageAlign: 'left',\n        showCancelButton: true,\n        confirmButtonText: this.$t('同意注销'),\n        confirmButtonColor: '#FF0000',\n        cancelButtonText: this.$t('取消'),\n        cancelButtonColor: '#999999'\n      }).then(async () => {\n        this.$toast.loading();\n        const {\n          money\n        } = await huoquyue_post();\n        if (money !== 0) {\n          this.$notify(this.$t('该账号存在可用余额, 不可注销!'), 'warning');\n          this.$toast.clear();\n          return;\n        }\n        if (this.userInfo.safeword == 0) {\n          this.getPassword(null);\n        } else {\n          this.pwtStatus = true;\n        }\n      });\n    },\n    async getPassword(value) {\n      this.formLabelAlign.cashPassword = value;\n      this.$toast.loading();\n      if (value == '') {\n        this.$notify(this.$t('请输入密码'), 'warning');\n        this.$toast.clear();\n        return;\n      }\n      try {\n        const res = await apilogoff(this.formLabelAlign);\n        this.$toast.clear();\n        this.$notify(this.$t('注销成功'), 'success');\n        this.$router.replace('/login');\n      } catch (error) {\n        console.log(`error ::->`, error);\n      }\n\n      // if (value == '123456') {\n      //     this.$toast(this.$t('注销成功'))\n      //     this.$router.push('/login')\n      // } else {\n      //     this.$toast(this.$t('密码错误'))\n      // }\n    }\n  }\n};","map":{"version":3,"names":["mapGetters","gerenxinxi_post","apilogoff","huoquyue_post","EnterPassword","components","_Popup","name","_Dialog","data","itemName","process","env","VUE_APP_ITEM_NAME","formLabelAlign","account","reason","cashPassword","pwtStatus","created","username","computed","userInfo","methods","onClickLeft","$router","go","onLogout","trim","$notify","$t","message","VUE_APP_PUT_ON_SHELVES","alert","title","messageAlign","showCancelButton","confirmButtonText","confirmButtonColor","cancelButtonText","cancelButtonColor","then","$toast","loading","money","clear","safeword","getPassword","value","res","replace","error","console","log"],"sources":["src/page/accountCancellation/index.vue"],"sourcesContent":["<template>\n    <div class=\"account_cancellation\">\n        <van-nav-bar safe-area-inset-top fixed :title=\"$t('账号注销')\" left-arrow @click-left=\"onClickLeft\" />\n        <div style=\"width: 100%;\" class=\"h46\"></div>\n        <el-form label-position=\"top\" label-width=\"80px\" :model=\"formLabelAlign\" class=\"acc_form\">\n            <el-form-item :label=\"$t('您的账号')\">\n                <el-input maxlength=\"50\" disabled v-model.trim=\"formLabelAlign.account\"></el-input>\n            </el-form-item>\n            <el-form-item :label=\"$t('为什么要离开?')\">\n                <el-input type=\"textarea\" maxlength=\"1000\" :autosize=\"{ minRows: 6, maxRows: 8 }\"\n                    v-model.trim=\"formLabelAlign.reason\"></el-input>\n            </el-form-item>\n        </el-form>\n        <div class=\"logout\" @click=\"onLogout\">{{ $t('注销账号') }}</div>\n        <!-- 密码弹窗 -->\n        <van-popup v-model=\"pwtStatus\" position=\"bottom\">\n            <enter-Password :isPasswordShow=\"pwtStatus\" @close=\"pwtStatus = false\"\n                @getPassword=\"getPassword\"></enter-Password>\n        </van-popup>\n    </div>\n</template>\n\n<script>\nimport { Popup, Dialog } from \"vant\";\nimport { mapGetters } from 'vuex'\nimport { gerenxinxi_post, apilogoff, huoquyue_post } from '@/API/user';\nimport EnterPassword from \"@/components/EnterPassword/index.vue\";\nexport default {\n    components: {\n        EnterPassword,\n        [Popup.name]: Popup,\n        [Dialog.name]: Dialog,\n    },\n    data() {\n        return {\n            itemName: process.env.VUE_APP_ITEM_NAME,\n            formLabelAlign: {\n                account: '',\n                reason: '',\n                cashPassword: '',\n            },\n            pwtStatus: false,\n        }\n    },\n    async created() {\n        const { username } = await gerenxinxi_post({})\n        this.formLabelAlign.account = username\n    },\n    computed: {\n        ...mapGetters({\n            userInfo: 'userInfo'\n        })\n    },\n    methods: {\n        onClickLeft() {\n            this.$router.go(-1)\n        },\n        onLogout() {\n            if (this.formLabelAlign.account.trim() == '') {\n                this.$notify(this.$t('请输入您的账号'), 'warning')\n                return\n            }\n            if (this.formLabelAlign.reason.trim() == '') {\n                this.$notify(this.$t('请输入您的离开原因'), 'warning')\n                return\n            }\n            let message = this.$t('警告！请谨慎操作注销账户，如果您不再使用该账号，可点击【同意注销】，注销后可能几天内无法注册。')\n            if (process.env.VUE_APP_PUT_ON_SHELVES) {\n                message = this.$t('警告！请谨慎操作注销账户，如果您不再使用该账号，可点击【同意注销】，注销后72小时内无法注册。')\n            }\n            Dialog.alert({\n                title: this.$t('您确认要注销账号吗？'),\n                message,\n                messageAlign: 'left',\n                showCancelButton: true,\n                confirmButtonText: this.$t('同意注销'),\n                confirmButtonColor: '#FF0000',\n                cancelButtonText: this.$t('取消'),\n                cancelButtonColor: '#999999',\n            }).then(async () => {\n                this.$toast.loading()\n                const { money } = await huoquyue_post()\n                if (money !== 0) {\n                    this.$notify(this.$t('该账号存在可用余额, 不可注销!'), 'warning')\n                    this.$toast.clear()\n                    return\n                }\n                if (this.userInfo.safeword == 0) {\n                    this.getPassword(null)\n                } else {\n                    this.pwtStatus = true;\n                }\n            });\n        },\n        async getPassword(value) {\n            this.formLabelAlign.cashPassword = value;\n            this.$toast.loading()\n            if (value == '') {\n                this.$notify(this.$t('请输入密码'), 'warning')\n                this.$toast.clear()\n                return\n            }\n\n            try {\n                const res = await apilogoff(this.formLabelAlign)\n                this.$toast.clear()\n                this.$notify(this.$t('注销成功'), 'success')\n                this.$router.replace('/login')\n            } catch (error) {\n                console.log(`error ::->`, error);\n            }\n\n            // if (value == '123456') {\n            //     this.$toast(this.$t('注销成功'))\n            //     this.$router.push('/login')\n            // } else {\n            //     this.$toast(this.$t('密码错误'))\n            // }\n\n        },\n    }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.acc_form {\n    padding: 0 15px;\n\n    :deep(.el-form-item__label) {\n        padding: 0 !important;\n        font-weight: 600;\n        font-size: 16px;\n        color: #333;\n    }\n}\n\n:deep(input) {\n    padding-right: 60px;\n}\n\n.logout {\n    margin: 15px 15px;\n    margin-top: 56px;\n    background: var(--main-color);\n    border-radius: 4px;\n    height: 44px;\n    font-style: normal;\n    font-weight: 400;\n    font-size: 16px;\n    line-height: 44px;\n    text-align: center;\n    color: #FFFFFF;\n}\n</style>\n<style lang=\"scss\">\n.van-dialog__message {\n    padding-top: 20px;\n    line-height: 25px;\n    border: none;\n}\n\n.van-dialog__footer {\n    padding: 0 15px 30px 15px;\n\n    &::after {\n        display: none;\n    }\n\n    button {\n        border: none;\n        border-radius: 8px;\n\n        &:nth-child(1) {\n            border: 1px solid #999999;\n            margin-right: 10px;\n        }\n\n        &:nth-child(2) {\n            background: #DA3231;\n            color: #FFFFFF !important;\n        }\n\n        &::before {\n            display: none;\n        }\n\n        &::after {\n            display: none;\n        }\n    }\n}\n</style>"],"mappings":";;;;AAwBA,SAAAA,UAAA;AACA,SAAAC,eAAA,EAAAC,SAAA,EAAAC,aAAA;AACA,OAAAC,aAAA;AACA;EACAC,UAAA;IACAD,aAAA;IACA,CAAAE,MAAA,CAAAC,IAAA,GAAAD,MAAA;IACA,CAAAE,OAAA,CAAAD,IAAA,GAAAC;EACA;EACAC,KAAA;IACA;MACAC,QAAA,EAAAC,OAAA,CAAAC,GAAA,CAAAC,iBAAA;MACAC,cAAA;QACAC,OAAA;QACAC,MAAA;QACAC,YAAA;MACA;MACAC,SAAA;IACA;EACA;EACA,MAAAC,QAAA;IACA;MAAAC;IAAA,UAAAnB,eAAA;IACA,KAAAa,cAAA,CAAAC,OAAA,GAAAK,QAAA;EACA;EACAC,QAAA;IACA,GAAArB,UAAA;MACAsB,QAAA;IACA;EACA;EACAC,OAAA;IACAC,YAAA;MACA,KAAAC,OAAA,CAAAC,EAAA;IACA;IACAC,SAAA;MACA,SAAAb,cAAA,CAAAC,OAAA,CAAAa,IAAA;QACA,KAAAC,OAAA,MAAAC,EAAA;QACA;MACA;MACA,SAAAhB,cAAA,CAAAE,MAAA,CAAAY,IAAA;QACA,KAAAC,OAAA,MAAAC,EAAA;QACA;MACA;MACA,IAAAC,OAAA,QAAAD,EAAA;MACA,IAAAnB,OAAA,CAAAC,GAAA,CAAAoB,sBAAA;QACAD,OAAA,QAAAD,EAAA;MACA;MACAtB,OAAA,CAAAyB,KAAA;QACAC,KAAA,OAAAJ,EAAA;QACAC,OAAA;QACAI,YAAA;QACAC,gBAAA;QACAC,iBAAA,OAAAP,EAAA;QACAQ,kBAAA;QACAC,gBAAA,OAAAT,EAAA;QACAU,iBAAA;MACA,GAAAC,IAAA;QACA,KAAAC,MAAA,CAAAC,OAAA;QACA;UAAAC;QAAA,UAAAzC,aAAA;QACA,IAAAyC,KAAA;UACA,KAAAf,OAAA,MAAAC,EAAA;UACA,KAAAY,MAAA,CAAAG,KAAA;UACA;QACA;QACA,SAAAvB,QAAA,CAAAwB,QAAA;UACA,KAAAC,WAAA;QACA;UACA,KAAA7B,SAAA;QACA;MACA;IACA;IACA,MAAA6B,YAAAC,KAAA;MACA,KAAAlC,cAAA,CAAAG,YAAA,GAAA+B,KAAA;MACA,KAAAN,MAAA,CAAAC,OAAA;MACA,IAAAK,KAAA;QACA,KAAAnB,OAAA,MAAAC,EAAA;QACA,KAAAY,MAAA,CAAAG,KAAA;QACA;MACA;MAEA;QACA,MAAAI,GAAA,SAAA/C,SAAA,MAAAY,cAAA;QACA,KAAA4B,MAAA,CAAAG,KAAA;QACA,KAAAhB,OAAA,MAAAC,EAAA;QACA,KAAAL,OAAA,CAAAyB,OAAA;MACA,SAAAC,KAAA;QACAC,OAAA,CAAAC,GAAA,eAAAF,KAAA;MACA;;MAEA;MACA;MACA;MACA;MACA;MACA;IAEA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}