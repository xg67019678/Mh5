{"ast":null,"code":"import \"vant/es/dialog/style\";\nimport _Dialog from \"vant/es/dialog\";\nimport \"vant/es/popup/style\";\nimport _Popup from \"vant/es/popup\";\nimport { mapGetters } from 'vuex';\nimport { gerenxinxi_post, apilogoff, huoquyue_post } from '@/API/user';\nimport EnterPassword from \"@/components/EnterPassword/index.vue\";\nexport default {\n  components: {\n    EnterPassword,\n    [_Popup.name]: _Popup,\n    [_Dialog.name]: _Dialog\n  },\n  data() {\n    return {\n      itemName: process.env.VUE_APP_ITEM_NAME,\n      formLabelAlign: {\n        account: '',\n        reason: '',\n        cashPassword: ''\n      },\n      pwtStatus: false\n    };\n  },\n  async created() {\n    const {\n      username\n    } = await gerenxinxi_post({});\n    this.formLabelAlign.account = username;\n  },\n  computed: {\n    ...mapGetters({\n      userInfo: 'userInfo'\n    })\n  },\n  methods: {\n    onClickLeft() {\n      this.$router.go(-1);\n    },\n    onLogout() {\n      if (this.formLabelAlign.account.trim() == '') {\n        this.$notify(this.$t('请输入您的账号'), 'warning');\n        return;\n      }\n      if (this.formLabelAlign.reason.trim() == '') {\n        this.$notify(this.$t('请输入您的离开原因'), 'warning');\n        return;\n      }\n      let message = this.$t('警告！请谨慎操作注销账户，如果您不再使用该账号，可点击【同意注销】，注销后可能几天内无法注册。');\n      if (process.env.VUE_APP_PUT_ON_SHELVES) {\n        message = this.$t('警告！请谨慎操作注销账户，如果您不再使用该账号，可点击【同意注销】，注销后72小时内无法注册。');\n      }\n      _Dialog.alert({\n        title: this.$t('您确认要注销账号吗？'),\n        message,\n        messageAlign: 'left',\n        showCancelButton: true,\n        confirmButtonText: this.$t('同意注销'),\n        confirmButtonColor: '#FF0000',\n        cancelButtonText: this.$t('取消'),\n        cancelButtonColor: '#999999'\n      }).then(async () => {\n        this.$toast.loading();\n        const {\n          money\n        } = await huoquyue_post();\n        if (money !== 0) {\n          this.$notify(this.$t('该账号存在可用余额, 不可注销!'), 'warning');\n          this.$toast.clear();\n          return;\n        }\n        if (this.userInfo.safeword == 0) {\n          this.getPassword(null);\n        } else {\n          this.pwtStatus = true;\n        }\n      });\n    },\n    async getPassword(value) {\n      this.formLabelAlign.cashPassword = value;\n      this.$toast.loading();\n      if (value == '') {\n        this.$notify(this.$t('请输入密码'), 'warning');\n        this.$toast.clear();\n        return;\n      }\n      try {\n        const res = await apilogoff(this.formLabelAlign);\n        this.$toast.clear();\n        this.$notify(this.$t('注销成功'), 'success');\n        this.$router.replace('/login');\n      } catch (error) {\n        console.log(`error ::->`, error);\n      }\n\n      // if (value == '123456') {\n      //     this.$toast(this.$t('注销成功'))\n      //     this.$router.push('/login')\n      // } else {\n      //     this.$toast(this.$t('密码错误'))\n      // }\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}