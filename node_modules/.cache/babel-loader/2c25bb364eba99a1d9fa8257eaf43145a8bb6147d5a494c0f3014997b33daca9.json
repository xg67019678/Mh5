{"ast":null,"code":"import \"vant/es/toast/style\";\nimport _Toast from \"vant/es/toast\";\nimport \"vant/es/badge/style\";\nimport _Badge from \"vant/es/badge\";\nimport \"vant/es/dialog/style\";\nimport _Dialog from \"vant/es/dialog\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport { keepGoodsCount, focusSellerCount, apicCuntOrderStatus } from \"@/API/user\";\nimport Footer from \"@/components/Footer\";\nimport { priceFormat } from '@/utils/utis';\nconst languageData = {\n  \"en\": \"English\",\n  \"tw\": \"繁體中文\",\n  \"cn\": \"简体中文\",\n  \"de\": 'Deutsch',\n  \"ja\": '日本語',\n  \"ms\": 'Melayu',\n  \"th\": 'ภาษาไทย',\n  \"pt\": 'Português',\n  \"es\": 'Español',\n  \"ru\": 'Русский',\n  \"el\": 'Ελληνικά',\n  \"it\": 'Italiano',\n  \"tr\": 'Türkçe',\n  \"af\": 'Afrikaans',\n  \"fr\": 'français',\n  \"ko\": '한국어'\n};\nimport { mapGetters } from \"vuex\";\nimport { isLogin } from \"@/utils/utis\";\nimport { getStatus, apiGetDownloadPath } from \"@/API/commodity\";\n//   api/index!download-url.action  \n//   下载链接\nexport default {\n  name: \"Me\",\n  components: {\n    Footer,\n    [_Dialog.Component.name]: _Dialog.Component,\n    [_Badge.name]: _Badge\n  },\n  data() {\n    return {\n      priceFormat,\n      goodNumber: 0,\n      shopNumber: 0,\n      isShelves: !process.env.VUE_APP_PUT_ON_SHELVES,\n      itemName: process.env.VUE_APP_ITEM_NAME,\n      isChristmas: process.env?.VUE_APP_IS_CHRISTMAS,\n      images: {\n        headerBg: require(`@/assets/${process.env.VUE_APP_ITEM_NAME}/bg.png`),\n        avatar: require(\"@/assets/image/me/avatar@2x.png\"),\n        copy: require(\"@/assets/image/me/fuzhi.png\"),\n        bClose: require(\"@/assets/image/me/close.png\"),\n        bOpen: require(\"@/assets/image/me/open.png\"),\n        arrow: require(\"@/assets/image/me/arrow.png\"),\n        arrow1: require(\"@/assets/image/me/arrow1.png\"),\n        bar: require(`@/assets/${process.env.VUE_APP_ITEM_NAME}/bar.png`),\n        icon9: require(\"@/assets/image/me/icon9.png\"),\n        loanIcon: require('@/assets/image/me/loan-icon.png'),\n        loanBg: require('@/assets/image/me/loan-bg.png')\n      },\n      banClose: false,\n      isShowBtn: false,\n      orderNav: [{\n        count: \"0\",\n        icon: require(`@/assets/${process.env.VUE_APP_ITEM_NAME}/icon1.png`),\n        title: this.$t(\"待付款\"),\n        type: \"0\",\n        name: \"waitPayCount\"\n      }, {\n        count: \"0\",\n        icon: require(`@/assets/${process.env.VUE_APP_ITEM_NAME}/icon2.png`),\n        title: this.$t(\"待发货\"),\n        type: \"1\",\n        name: \"waitDeliverCount\"\n      }, {\n        count: \"0\",\n        icon: require(`@/assets/${process.env.VUE_APP_ITEM_NAME}/icon3.png`),\n        title: this.$t(\"待收货\"),\n        type: \"3\",\n        name: \"waitReceiptCount\"\n      }, {\n        count: \"0\",\n        icon: require(`@/assets/${process.env.VUE_APP_ITEM_NAME}/icon4.png`),\n        title: this.$t(\"待评价\"),\n        type: \"4\",\n        name: \"waitEvaluateCount\"\n      }, {\n        count: \"0\",\n        icon: require(`@/assets/${process.env.VUE_APP_ITEM_NAME}/icon5.png`),\n        title: this.$t(\"退款/售后\"),\n        type: \"6\",\n        name: \"refundCount\"\n      }],\n      navData: [{\n        icon: require(\"@/assets/image/me/icon6.png\"),\n        name: this.$t(\"语言\"),\n        tips: languageData[this.$store.getters.language || \"en\"],\n        path: \"/language\",\n        needLogin: false\n      },\n      // {\n      //     icon: require(\"@/assets/image/me/icon7.png\"),\n      //     name: this.$t(\"下载\"),\n      //     needLogin: false,\n      //     path: location.origin + \"/app.html?r=\" + Math.random(),\n      // },\n      {\n        icon: require(\"@/assets/image/me/icon8.png\"),\n        name: this.$t(\"设置\"),\n        needLogin: true,\n        path: \"/setting\"\n      }],\n      status: 0,\n      scrollY: 0,\n      isApp: window.plus ? true : false,\n      paths: {\n        'Argos': 'https://argos.me/',\n        'MetaShop': 'https://e-metashop.com/',\n        'Tongda': 'https://www.tongdashops.com/',\n        'FamilyMart': 'https://familymartex.com/',\n        'FamilyShop': 'https://www.familyshopex.com/',\n        'Inchoi': 'https://Inchoishop.com/',\n        'Hive': 'https://www.hivemalls.com/',\n        'TikTokMall': 'https://tiktokmallin.com/',\n        'Shop2u': 'https://shop2u.co/',\n        'EShop': 'https://ml.thsjbvh.site/',\n        'GreenMall': 'https://djeion.com/',\n        'SM-wholesaleShop': 'https://justshopmall.com/',\n        'ArgosShop': 'https://argosshoppro.com/',\n        'Iceland': 'https://icelandmarts.com/',\n        'INT Overstock': 'https://overstock8.me/',\n        'TikTok-Wholesale': 'https://tiktok-wholesale.com/',\n        'AntMall': 'https://antmallin.com/'\n      }\n    };\n  },\n  computed: {\n    ...mapGetters({\n      userInfo: \"userInfo\",\n      userMoney: \"userMoney\"\n    }),\n    showServiceBtn() {\n      if (isLogin()) {\n        return true;\n      }\n      return !['SM-wholesaleShop', 'FamilyShop'].includes(this.itemName);\n    }\n  },\n  created() {\n    this.$store.dispatch(\"getUserInfo\");\n    this.$store.dispatch(\"getUserMoney\");\n    this.getCount();\n    if (!window.plus) {\n      // 下载链接地址\n      // apiGetDownloadPath().then(path => {\n      //     // if (this.itemName == 'Mbuy') this.navData[0].path = path\n      //     // else this.navData[1].path = path\n      //     this.navData[1].path = path\n      // })\n    }\n    if (process.env.VUE_APP_PUT_ON_SHELVES) {\n      this.navData.splice(0, 1);\n    }\n    // if (window.plus) {\n    //     //app中删除下载按钮\n    //     this.navData.splice(1, 1);\n    // }\n    this.banClose = localStorage.getItem(\"banClose\") == \"true\";\n  },\n  mounted() {\n    if (isLogin()) {\n      this.getStatusInfo();\n      // 获取数量\n      apicCuntOrderStatus().then(res => {\n        // waitPayCount  代付款\n        // waitDeliverCount  待发货\n        // waitReceiptCount 待收货\n        // waitEvaluateCount 待评价\n        // refundCount 退款\n        this.orderNav.forEach(item => {\n          item.count = res?.[item.name];\n        });\n      });\n    }\n    setTimeout(() => {\n      window.addEventListener(\"scroll\", this.handleScroll);\n    }, 1000);\n  },\n  methods: {\n    handleToggle(path) {\n      if (!isLogin()) {\n        // Dialog.confirm({\n        //     title: this.$t(\"您还未登录\"),\n        //     message: this.$t(\"是否跳转到登录页面\"),\n        //     confirmButtonText: this.$t(\"确认\"),\n        //     cancelButtonText: this.$t(\"取消\"),\n        // }).then(() => {\n        //     this.$router.push('/login')\n        // });\n        this.$notifyWarn(this.$t(\"请先登录\"));\n        this.$router.push(\"/login\");\n        return false;\n      } else {\n        this.$router.push(path);\n      }\n    },\n    copyId(code) {\n      this.$copyText(code).then(() => {\n        _Toast(this.$t(\"复制成功\"));\n      }, () => {\n        _Toast(this.$t(\"复制失败\"));\n      });\n    },\n    open() {\n      if (this.status === 0) {\n        //   this.$router.push(\"/merchantSettled\");\n      } else {\n        this.$router.push(\"/merchantDown\");\n      }\n    },\n    merchantJump() {\n      if (this.userInfo?.roletype != 1) {\n        // 商家入驻\n        let lang = localStorage.getItem(\"lang\") || \"en\";\n        lang = lang.replace(/\"/g, \"\");\n        let path = window?.plus ? this.$store.state.app.app_domain : location.origin + '/';\n        // let path = location.origin + '/'\n        const url = encodeURI(`${path}promote/#/?lang=${lang}&avatar=${this.userInfo?.avatar || 1}&wt=app`);\n        const query = {\n          url: '',\n          title: this.$t(\"商家入驻\")\n        };\n        this.$router.push({\n          path: \"/iframe\",\n          query\n        });\n        // if (window.isFlutterInAppWebViewReady) {\n        //     window.flutter_inappwebview.callHandler(\"jumpToBrowser\", encodeURI(url))\n        //     return\n        // } else {\n        //     if (window.plus) {\n        //         // plus.runtime.openURL(encodeURI(url))\n        //         // window.location.href = encodeURI(url)\n        //         window.addEventListener(\"flutterInAppWebViewPlatformReady\", function () {\n        //             window.flutter_inappwebview\n        //                 .callHandler(\"jumpToBrowser\", encodeURI(url))\n        //         })\n        //     } else {\n        //         window.open(url)\n        //     }\n        // }\n      } else {\n        // 商家登陆\n        let token = localStorage.getItem(\"token\");\n        let lang = localStorage.getItem(\"lang\") || \"en\";\n        let path = window?.plus ? this.$store.state.app.app_domain : location.origin + '/';\n        window.location.href = encodeURI(`${path}www/#/?from=shop&token=${token}&lang=${lang}`);\n      }\n\n      // const query = { url, title: this.$t(\"商家入驻\") };\n      // this.$router.push({\n      //     path: \"/iframe\",\n      //     query\n      // });\n    },\n    openWin(path, needLogin) {\n      if (needLogin && !isLogin()) {\n        this.$notifyWarn(this.$t(\"请先登录\"));\n        this.$router.push(\"/login\");\n        return false;\n      }\n      if (path.indexOf('http') != -1) {\n        if (window.plus) {\n          plus.runtime.openURL(encodeURI(path + '?wt=app'));\n        } else {\n          window.open(path);\n        }\n      } else {\n        scrollTo(0, 0);\n        this.$router.push({\n          path\n        });\n      }\n    },\n    openOrder(type) {\n      if (!isLogin()) {\n        // Toast(this.$t(\"请先登录\"));\n        // Dialog.confirm({\n        //     title: this.$t(\"您还未登录\"),\n        //     message: this.$t(\"是否跳转到登录页面\"),\n        //     confirmButtonText: this.$t(\"确认\"),\n        //     cancelButtonText: this.$t(\"取消\"),\n        // }).then(() => {\n        //     this.$router.push(\"/login\");\n        // });\n        this.$notifyWarn(this.$t(\"请先登录\"));\n        this.$router.push(\"/login\");\n        return false;\n      }\n      const params = {\n        path: \"/order\"\n      };\n      if (type) {\n        params.query = {\n          type\n        };\n      }\n      this.$router.push(params);\n    },\n    //查询店铺申请进度\n    getStatusInfo() {\n      getStatus({}).then(res => {\n        this.status = res.status;\n      });\n    },\n    getCount() {\n      if (!isLogin()) return;\n      keepGoodsCount().then(res => {\n        if (res == 'err403') return;\n        this.goodNumber = res || 0;\n      });\n      focusSellerCount().then(res => {\n        if (res == 'err403') return;\n        this.shopNumber = res || 0;\n      });\n    },\n    // 隐藏余额\n    hideMoney() {\n      this.banClose = !this.banClose;\n      localStorage.setItem('banClose', this.banClose);\n    },\n    toCustomerService() {\n      const path = this.$store.state.multiItem[process.env.VUE_APP_ITEM_NAME].customer_service;\n      if (path) {\n        if (window.plus) {\n          plus.runtime.openURL(encodeURI(path + '?wt=app'));\n          return;\n        } else {\n          window.open(path);\n        }\n      } else {\n        this.$router.push('/customerServiceIndex?path=customerService');\n      }\n    },\n    // 记录滚动条位置\n    handleScroll() {\n      let Y = document.documentElement.scrollTop || document.body.scrollTop;\n      if (Math.abs(Y - this.scrollY) > 300) {\n        this.isShowBtn = this.scrollY < Y;\n        this.scrollY = Y;\n      }\n    }\n  },\n  beforeDestroy() {\n    window.removeEventListener('scroll', this.handleScroll);\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}