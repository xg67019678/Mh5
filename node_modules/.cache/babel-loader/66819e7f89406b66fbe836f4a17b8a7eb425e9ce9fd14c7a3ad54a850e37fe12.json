{"ast":null,"code":"import \"vant/es/pull-refresh/style\";\nimport _PullRefresh from \"vant/es/pull-refresh\";\nimport \"vant/es/swipe-cell/style\";\nimport _SwipeCell from \"vant/es/swipe-cell\";\nimport \"vant/es/empty/style\";\nimport _Empty from \"vant/es/empty\";\nimport \"vant/es/list/style\";\nimport _List from \"vant/es/list\";\nimport \"vant/es/nav-bar/style\";\nimport _NavBar from \"vant/es/nav-bar\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.reduce.js\";\nimport GoodsItemTwo from '@/components/GoodsItemTwo/index.vue';\nimport { isLogin } from '@/utils/utis';\nimport { keepGoodsList } from '@/API/user';\nimport { keepGoodsDel } from \"@/API/commodity\";\nexport default {\n  name: 'CollectGoods',\n  components: {\n    [_NavBar.name]: _NavBar,\n    [_List.name]: _List,\n    [_Empty.name]: _Empty,\n    [_SwipeCell.name]: _SwipeCell,\n    [_PullRefresh.name]: _PullRefresh,\n    GoodsItemTwo\n  },\n  data() {\n    return {\n      list: [],\n      loading: false,\n      finished: false,\n      refreshing: false,\n      pageNum: 1,\n      pageSize: 10\n    };\n  },\n  created() {\n    if (!isLogin()) {\n      this.$router.push('/');\n    }\n    // this.onLoad();\n  },\n  methods: {\n    onRefresh() {\n      // 清空列表数据\n      this.finished = false;\n      this.pageNum = 1;\n      // 重新加载数据\n      // 将 loading 设置为 true，表示处于加载状态\n      this.loading = true;\n      this.onLoad();\n    },\n    onLoad() {\n      if (this.refreshing) {\n        this.list = [];\n        this.refreshing = false;\n      }\n      this.getTableList();\n    },\n    getTableList() {\n      const params = {\n        pageNum: this.pageNum,\n        pageSize: this.pageSize\n      };\n      keepGoodsList(params).then(res => {\n        const {\n          pageList\n        } = res;\n        this.list = this.pageNum === 1 ? pageList : [...this.list, ...pageList];\n        this.pageNum++;\n        this.loading = false;\n        if (pageList.length < this.pageSize) {\n          this.finished = true;\n        }\n        var obj = {};\n        this.list = this.list.reduce((prev, cur) => {\n          obj[cur.id] ? \"\" : obj[cur.id] = true && prev.push(cur);\n          return prev;\n        }, []);\n      }).catch(() => {\n        this.loading = false;\n        this.finished = true;\n      });\n    },\n    delHandle(data) {\n      this.refreshing = true;\n      keepGoodsDel({\n        sellerGoodsId: data.id\n      }).then(() => {\n        this.onRefresh();\n      });\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}