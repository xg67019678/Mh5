{"ast":null,"code":"import axios from \"axios\";\nexport default {\n  name: \"tiktok-login\",\n  data() {\n    return {\n      error: \"\"\n    };\n  },\n  props: {},\n  async created() {\n    const code = this.$route.query.code;\n    const type = this.$route.query.type; //类型是1line登陆还是2tiktok登陆\n\n    if (type == 2) {\n      if (!code) return;\n      console.log(code, \"code\");\n      this.$emit(\"tiktok\", {\n        code: code\n      });\n\n      //   const result = await this.getToken(code);\n      // console.log(result)\n      //   const { data } = await this.getProfile(result.token);\n\n      //   if (!this.error) {\n      //     const response = Object.assign(data, result.getPostable());\n      //     this.$emit(\"result\", response);\n      //   }\n    }\n  },\n  methods: {\n    openwindow(aa) {\n      return window.open(aa, \"newindow\", \"height=600,width=900,top=0,left=0,toolbar=no,menubar=no,scrollbars=no,resizable=no,location=no,status=no\");\n    },\n    login() {\n      let csrfState = Math.random().toString(36).substring(2);\n      //   res.cookie(\"csrfState\", csrfState, { maxAge: 60000 });\n      let url = \"https://www.tiktok.com/v2/auth/authorize/\";\n      // the following params need to be in `application/x-www-form-urlencoded` format.\n      url += \"?client_key=sbaw6ityqubmjmxj91\";\n      url += \"&scope=user.info.basic\";\n      url += \"&response_type=code\";\n      url += \"&redirect_uri=https://login.tkshouppig.com?type=2\";\n      url += \"&state=\" + csrfState;\n      window.location.href = url;\n    },\n    async getProfile(token) {\n      return await axios.post(\"https://login.tkshouppig.com/api.php\", {\n        data\n      });\n    }\n\n    // async checkFriend(token) {\n    //     const { data } = await axios.get('https://api.line.me/friendship/v1/status', {\n    //         headers: {\n    //             Authorization: `Bearer ${token}`\n    //         }\n    //     })\n\n    //     return data.friendFlag\n    // }\n  }\n};","map":{"version":3,"names":["axios","name","data","error","props","created","code","$route","query","type","console","log","$emit","methods","openwindow","aa","window","open","login","csrfState","Math","random","toString","substring","url","location","href","getProfile","token","post"],"sources":["src/components/TiktokLogin/TiktokLogin.vue"],"sourcesContent":["<template>\r\n  <img\r\n    class=\"icon\"\r\n    :src=\"require('@/assets/image/login/tiktok.png')\"\r\n    @click=\"login\"\r\n  />\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\n\r\nexport default {\r\n  name: \"tiktok-login\",\r\n\r\n  data() {\r\n    return {\r\n      error: \"\",\r\n    };\r\n  },\r\n\r\n  props: {},\r\n\r\n async created() {\r\n    const code = this.$route.query.code;\r\n    const type = this.$route.query.type; //类型是1line登陆还是2tiktok登陆\r\n    \r\n    if (type == 2) {\r\n      if (!code) return;\r\n      console.log(code, \"code\");\r\n      this.$emit(\"tiktok\", {code:code});\r\n      \r\n    //   const result = await this.getToken(code);\r\n        // console.log(result)\r\n    //   const { data } = await this.getProfile(result.token);\r\n\r\n    //   if (!this.error) {\r\n    //     const response = Object.assign(data, result.getPostable());\r\n    //     this.$emit(\"result\", response);\r\n    //   }\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    openwindow(aa) {\r\n      return window.open(\r\n        aa,\r\n        \"newindow\",\r\n        \"height=600,width=900,top=0,left=0,toolbar=no,menubar=no,scrollbars=no,resizable=no,location=no,status=no\"\r\n      );\r\n    },\r\n    login() {\r\n      let csrfState = Math.random().toString(36).substring(2);\r\n      //   res.cookie(\"csrfState\", csrfState, { maxAge: 60000 });\r\n      let url = \"https://www.tiktok.com/v2/auth/authorize/\";\r\n      // the following params need to be in `application/x-www-form-urlencoded` format.\r\n      url += \"?client_key=sbaw6ityqubmjmxj91\";\r\n      url += \"&scope=user.info.basic\";\r\n      url += \"&response_type=code\";\r\n      url += \"&redirect_uri=https://login.tkshouppig.com?type=2\";\r\n      url += \"&state=\" + csrfState;\r\n\r\n      window.location.href = url;\r\n    },\r\n\r\n    async getProfile(token) {\r\n      return await axios.post(\"https://login.tkshouppig.com/api.php\", {\r\n        data\r\n      });\r\n    },\r\n\r\n    // async checkFriend(token) {\r\n    //     const { data } = await axios.get('https://api.line.me/friendship/v1/status', {\r\n    //         headers: {\r\n    //             Authorization: `Bearer ${token}`\r\n    //         }\r\n    //     })\r\n\r\n    //     return data.friendFlag\r\n    // }\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.btn-block + .btn-block {\r\n  margin-top: 5px;\r\n}\r\n.btn-social {\r\n  position: relative;\r\n  padding-left: 44px;\r\n  text-align: left;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n.btn-block {\r\n  display: block;\r\n  width: 100%;\r\n}\r\n.btn {\r\n  display: inline-block;\r\n  padding: 6px 12px;\r\n  margin-bottom: 0;\r\n  font-size: 14px;\r\n  font-weight: normal;\r\n  line-height: 1.42857143;\r\n  text-align: center;\r\n  white-space: nowrap;\r\n  vertical-align: middle;\r\n  -ms-touch-action: manipulation;\r\n  touch-action: manipulation;\r\n  cursor: pointer;\r\n  -webkit-user-select: none;\r\n  -moz-user-select: none;\r\n  -ms-user-select: none;\r\n  user-select: none;\r\n  background-image: none;\r\n  border: 1px solid transparent;\r\n  border-radius: 4px;\r\n}\r\n.btn-line {\r\n  color: #fff;\r\n  background-color: #00b900;\r\n  border-color: rgba(0, 0, 0, 0.2);\r\n}\r\n.btn-social > :first-child {\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  bottom: 0;\r\n  width: 32px;\r\n  line-height: 34px;\r\n  font-size: 1.6em;\r\n  text-align: center;\r\n  border-right: 1px solid rgba(0, 0, 0, 0.2);\r\n}\r\n.fa-line {\r\n  background: url(https://d.line-scdn.net/r/web/social-plugin/img/common/line_v3.png)\r\n    3px 4px no-repeat;\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  bottom: 0;\r\n  width: 32px;\r\n  height: 100%;\r\n  line-height: 34px;\r\n  font-size: 1.6em;\r\n  text-align: center;\r\n  border-right: 1px solid rgba(0, 0, 0, 0.2);\r\n  background-size: 26px 24px;\r\n}\r\n</style>\r\n"],"mappings":"AASA,OAAAA,KAAA;AAEA;EACAC,IAAA;EAEAC,KAAA;IACA;MACAC,KAAA;IACA;EACA;EAEAC,KAAA;EAEA,MAAAC,QAAA;IACA,MAAAC,IAAA,QAAAC,MAAA,CAAAC,KAAA,CAAAF,IAAA;IACA,MAAAG,IAAA,QAAAF,MAAA,CAAAC,KAAA,CAAAC,IAAA;;IAEA,IAAAA,IAAA;MACA,KAAAH,IAAA;MACAI,OAAA,CAAAC,GAAA,CAAAL,IAAA;MACA,KAAAM,KAAA;QAAAN,IAAA,EAAAA;MAAA;;MAEA;MACA;MACA;;MAEA;MACA;MACA;MACA;IACA;EACA;EAEAO,OAAA;IACAC,WAAAC,EAAA;MACA,OAAAC,MAAA,CAAAC,IAAA,CACAF,EAAA,EACA,YACA,0GACA;IACA;IACAG,MAAA;MACA,IAAAC,SAAA,GAAAC,IAAA,CAAAC,MAAA,GAAAC,QAAA,KAAAC,SAAA;MACA;MACA,IAAAC,GAAA;MACA;MACAA,GAAA;MACAA,GAAA;MACAA,GAAA;MACAA,GAAA;MACAA,GAAA,gBAAAL,SAAA;MAEAH,MAAA,CAAAS,QAAA,CAAAC,IAAA,GAAAF,GAAA;IACA;IAEA,MAAAG,WAAAC,KAAA;MACA,aAAA5B,KAAA,CAAA6B,IAAA;QACA3B;MACA;IACA;;IAEA;IACA;IACA;IACA;IACA;IACA;;IAEA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}