{"ast":null,"code":"import { gerenxinxi_post, huoquyue_post } from \"@/API/user\";\nexport default {\n  state: {\n    userInfo: null,\n    userMoney: null\n  },\n  getters: {\n    userInfo: state => {\n      return state.userInfo;\n    },\n    userMoney: state => {\n      return state.userMoney;\n    }\n  },\n  mutations: {\n    SET_USERINFO: (state, info) => {\n      state.userInfo = info;\n    },\n    SET_USERMONEY: (state, money) => {\n      state.userMoney = money;\n    }\n  },\n  actions: {\n    getUserInfo({\n      commit\n    }) {\n      const TOKEN = localStorage.getItem('token');\n      return new Promise((resovle, reject) => {\n        if (TOKEN) {\n          gerenxinxi_post({}).then(res => {\n            commit('SET_USERINFO', res);\n            resovle(res);\n          }).catch(() => {\n            commit('SET_USERINFO', null);\n            localStorage.removeItem('token');\n            reject('fetch error');\n          });\n        } else {\n          commit('SET_USERINFO', null);\n          resovle('clear userinfo');\n        }\n      });\n    },\n    getUserMoney({\n      commit\n    }) {\n      const TOKEN = localStorage.getItem('token');\n      return new Promise((resovle, reject) => {\n        if (TOKEN) {\n          huoquyue_post().then(res => {\n            commit('SET_USERMONEY', res);\n            resovle(res);\n          }).catch(() => {\n            commit('SET_USERMONEY', null);\n            reject('fetch error');\n          });\n        } else {\n          commit('SET_USERMONEY', null);\n          resovle('clear userMoney');\n        }\n      });\n    },\n    logout({\n      commit\n    }) {\n      commit('SET_USERINFO', null);\n      localStorage.removeItem('token');\n      localStorage.removeItem('productList');\n      localStorage.removeItem('cartList');\n    }\n  }\n};","map":{"version":3,"names":["gerenxinxi_post","huoquyue_post","state","userInfo","userMoney","getters","mutations","SET_USERINFO","info","SET_USERMONEY","money","actions","getUserInfo","commit","TOKEN","localStorage","getItem","Promise","resovle","reject","then","res","catch","removeItem","getUserMoney","logout"],"sources":["C:/Users/xg670/Desktop/运行/mmh5/src/store/modules/user.js"],"sourcesContent":["import {gerenxinxi_post, huoquyue_post} from \"@/API/user\";\n\nexport default {\n  state: {\n    userInfo: null,\n    userMoney: null\n  },\n  getters: {\n    userInfo: (state) => {\n      return state.userInfo\n    },\n    userMoney: (state) => {\n      return state.userMoney\n    }\n  },\n  mutations: {\n    SET_USERINFO: (state, info) => {\n      state.userInfo = info\n    },\n    SET_USERMONEY: (state, money) => {\n      state.userMoney = money\n    }\n  },\n  actions: {\n    getUserInfo({ commit }) {\n      const TOKEN = localStorage.getItem('token')\n      return new Promise((resovle, reject) => {\n        if (TOKEN) {\n          gerenxinxi_post({}).then(res => {\n            commit('SET_USERINFO', res)\n            resovle(res)\n          }).catch(() => {\n            commit('SET_USERINFO', null)\n            localStorage.removeItem('token')\n            reject('fetch error')\n          })\n        } else {\n          commit('SET_USERINFO', null)\n          resovle('clear userinfo')\n        }\n      })\n    },\n    getUserMoney({ commit }) {\n      const TOKEN = localStorage.getItem('token')\n      return new Promise((resovle, reject) => {\n        if (TOKEN) {\n          huoquyue_post().then(res => {\n            commit('SET_USERMONEY', res)\n            resovle(res)\n          }).catch(() => {\n            commit('SET_USERMONEY', null)\n            reject('fetch error')\n          })\n        } else {\n          commit('SET_USERMONEY', null)\n          resovle('clear userMoney')\n        }\n      })\n    },\n    logout({ commit }) {\n      commit('SET_USERINFO', null)\n      localStorage.removeItem('token')\n      localStorage.removeItem('productList')\n      localStorage.removeItem('cartList')\n    }\n  }\n}\n"],"mappings":"AAAA,SAAQA,eAAe,EAAEC,aAAa,QAAO,YAAY;AAEzD,eAAe;EACbC,KAAK,EAAE;IACLC,QAAQ,EAAE,IAAI;IACdC,SAAS,EAAE;EACb,CAAC;EACDC,OAAO,EAAE;IACPF,QAAQ,EAAGD,KAAK,IAAK;MACnB,OAAOA,KAAK,CAACC,QAAQ;IACvB,CAAC;IACDC,SAAS,EAAGF,KAAK,IAAK;MACpB,OAAOA,KAAK,CAACE,SAAS;IACxB;EACF,CAAC;EACDE,SAAS,EAAE;IACTC,YAAY,EAAEA,CAACL,KAAK,EAAEM,IAAI,KAAK;MAC7BN,KAAK,CAACC,QAAQ,GAAGK,IAAI;IACvB,CAAC;IACDC,aAAa,EAAEA,CAACP,KAAK,EAAEQ,KAAK,KAAK;MAC/BR,KAAK,CAACE,SAAS,GAAGM,KAAK;IACzB;EACF,CAAC;EACDC,OAAO,EAAE;IACPC,WAAWA,CAAC;MAAEC;IAAO,CAAC,EAAE;MACtB,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;MAC3C,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;QACtC,IAAIL,KAAK,EAAE;UACTd,eAAe,CAAC,CAAC,CAAC,CAAC,CAACoB,IAAI,CAACC,GAAG,IAAI;YAC9BR,MAAM,CAAC,cAAc,EAAEQ,GAAG,CAAC;YAC3BH,OAAO,CAACG,GAAG,CAAC;UACd,CAAC,CAAC,CAACC,KAAK,CAAC,MAAM;YACbT,MAAM,CAAC,cAAc,EAAE,IAAI,CAAC;YAC5BE,YAAY,CAACQ,UAAU,CAAC,OAAO,CAAC;YAChCJ,MAAM,CAAC,aAAa,CAAC;UACvB,CAAC,CAAC;QACJ,CAAC,MAAM;UACLN,MAAM,CAAC,cAAc,EAAE,IAAI,CAAC;UAC5BK,OAAO,CAAC,gBAAgB,CAAC;QAC3B;MACF,CAAC,CAAC;IACJ,CAAC;IACDM,YAAYA,CAAC;MAAEX;IAAO,CAAC,EAAE;MACvB,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;MAC3C,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;QACtC,IAAIL,KAAK,EAAE;UACTb,aAAa,CAAC,CAAC,CAACmB,IAAI,CAACC,GAAG,IAAI;YAC1BR,MAAM,CAAC,eAAe,EAAEQ,GAAG,CAAC;YAC5BH,OAAO,CAACG,GAAG,CAAC;UACd,CAAC,CAAC,CAACC,KAAK,CAAC,MAAM;YACbT,MAAM,CAAC,eAAe,EAAE,IAAI,CAAC;YAC7BM,MAAM,CAAC,aAAa,CAAC;UACvB,CAAC,CAAC;QACJ,CAAC,MAAM;UACLN,MAAM,CAAC,eAAe,EAAE,IAAI,CAAC;UAC7BK,OAAO,CAAC,iBAAiB,CAAC;QAC5B;MACF,CAAC,CAAC;IACJ,CAAC;IACDO,MAAMA,CAAC;MAAEZ;IAAO,CAAC,EAAE;MACjBA,MAAM,CAAC,cAAc,EAAE,IAAI,CAAC;MAC5BE,YAAY,CAACQ,UAAU,CAAC,OAAO,CAAC;MAChCR,YAAY,CAACQ,UAAU,CAAC,aAAa,CAAC;MACtCR,YAAY,CAACQ,UAAU,CAAC,UAAU,CAAC;IACrC;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}